# 取扱説明書DX システム要件定義書（開発部門向け）

**作成日**: 2026年1月22日  
**作成者**: 事業開発部門  
**対象**: 開発部門  
**基づく資料**: `docs/input/取扱説明書DX_事業計画_統合版.md`

---

## 📋 エグゼクティブサマリー（開発部門向け）

### 事業の目的

従来の「読む取扱説明書」を、**AIエージェントを活用した"先回りして最適化した情報を届ける仕組み"**へ進化させるDX事業。

**核心コンセプト**: 「探す」から「届く」へ  
→ ユーザーが探さなくても、必要な情報が自動で届くシステムを構築

### 開発の目標

**Phase 1（2026年度、0-9ヶ月）で実現すべき成果:**
- 問合せ削減率：20-30%（最終目標30%以上）
- 回答精度：90%以上
- レスポンス時間：1秒以下
- プロアクティブ案内利用率：40%以上
- 緊急時問合せ削減率：50%以上

**売上目標**: 2026年度2億円（PoC実施、市場検証・基盤構築）

---

## 1. 開発すべきシステムの全体像

### 1.1 システムの位置づけ

```
【提供チャネル】
├─ 車載AIエージェント（車内）
├─ スマホアプリ（iOS/Android）
├─ コールセンター連携
└─ Web管理画面（OEM向け）

【コアシステム】
├─ RAGベースの検索型AI（9つのインテント分類対応）
├─ プロアクティブ情報提供エンジン
├─ データクリーニング・構造化システム
└─ データ還流システム（Phase 2以降）
```

### 1.2 情報アーキテクチャ（4層構造）

| レイヤー | 内容 | 開発優先度 | Phase |
|:--|:--|:--|:--|
| **L1：取扱情報ベース** | 製品機能、操作手順、安全情報の構造化データ | 最高 | Phase 1 |
| **L2：文脈データ層** | 状況・環境・ユーザー属性データ | 高 | Phase 2 |
| **L3：AIガイド層** | 状況認識＋提案生成 | 最高 | Phase 1（限定版）→ Phase 3（本格版） |
| **L4：体験ログ層** | 利用データ・嗜好・行動ログ | 中 | Phase 2以降 |

---

## 2. Phase 1で開発すべき機能（0-9ヶ月）

### 2.1 必須機能（MVP）

#### FR-1: RAGベースの検索型AI

**開発期間**: 2-3ヶ月  
**優先度**: 最高

**実装すべき機能:**

1. **データクリーニング・構造化**（FR-1.1）
   - PDFやドキュメントから不要な要素（ヘッダー・フッター・ページ番号など）を除去
   - 取扱説明書特有の構造（章・節・手順・注意事項など）に基づいて構造化
   - **技術要件**: PDFパーサー、構造解析アルゴリズム

2. **セマンティック境界チャンキング**（FR-1.2）
   - 章・節・手順単位での分割
   - コンテキストオーバーラップ設計
   - **目標**: 検索精度15-20%向上

3. **マルチベクトル戦略**（FR-1.3）
   - タイトル・本文・メタデータを個別にベクトル化
   - 用途に応じて使い分け
   - **目標**: 検索速度40%向上

4. **ハイブリッド検索**（FR-1.4）
   - ベクトル検索+キーワード検索の統合（RRF: Reciprocal Rank Fusion）
   - 検索前フィルタリング（メタデータ活用で不要な検索を削減、コスト40%削減）

5. **インテント検出・ルーティング**（FR-1.5）
   - 9つのインテント分類の検出（検索型5つ＋プロアクティブ型4つ）
   - **目標**: インテント検出精度95%+
   - インテント別に最適化された10種類以上のプロンプトテンプレート

6. **回答生成**（FR-1.6）
   - **目標**: 回答精度90-95%、レスポンス時間1秒以下
   - 複合質問対応

**技術スタック（推奨）:**
- **RAGフレームワーク**: LangChain / LlamaIndex
- **LLM**: GPT-4 / Claude 3.5 / Gemini 1.5 Pro（マルチプロバイダー対応）
- **エンベディング**: OpenAI text-embedding-3-large
- **ベクトルDB**: Supabase + pgvector（第一候補）または Pinecone / Weaviate

---

#### FR-2: プロアクティブ情報提供（限定版）

**開発期間**: 2-3ヶ月  
**優先度**: 最高（差別化機能）

**Phase 1で実装すべき機能:**

1. **緊急時自動案内**（FR-2.1）
   - 警告灯点灯時、異常検知時に自動で対応方法を提示
   - **目標**: 緊急時問合せ削減率50%以上
   - **技術要件**: 車両データ連携（OBD-II、コネクテッドカーAPI）、リアルタイム処理

2. **タイミングベース案内**（FR-2.2）
   - 納車直後、初回利用時など、特定タイミングで必要な情報を自動提示
   - **技術要件**: ユーザー状態管理、タイミング判定エンジン

3. **よくある質問の自動提示**（FR-2.3）
   - ユーザーの状況に応じて、関連するよくある質問を自動表示
   - **技術要件**: ユーザーコンテキスト分析、FAQマッチング

**Phase 1では実装しない機能（Phase 3以降）:**
- 状況認識による先回り案内（FR-2.4）
- 新機能・便利機能の発見提案（FR-2.5）
- 環境・状況に応じた最適提案（FR-2.6）

---

#### FR-3: マルチチャネル展開

**開発期間**: 並行開発（Phase 1全体を通じて）  
**優先度**: 高

**Phase 1で実装すべきチャネル:**

1. **スマホアプリ**（FR-3.2）
   - iOS/Android対応
   - プッシュ通知機能
   - **技術スタック**: Flutter（既存計画で検討）

2. **Web管理画面**（FR-3.4）
   - OEM向け管理画面
   - 基本的なデータ分析・レポート機能
   - **技術スタック**: Next.js + TypeScript + Supabase（推奨）

**Phase 1では実装しないチャネル（Phase 2以降）:**
- 車載AIエージェント連携（FR-3.1）
- コールセンター連携（FR-3.3）

---

### 2.2 非機能要件（Phase 1）

#### パフォーマンス要件

**想定ユーザー規模**: Phase 1初期は1,000-5,000ユーザー規模

| 項目 | 目標値 | 測定方法 |
|:--|:--|:--|
| **レスポンス時間** | 1秒以下（90-95%のクエリ） | API応答時間の測定 |
| **同時接続数** | 1,000接続以上 | 負荷テスト |
| **スループット** | 1,000リクエスト/分以上 | 負荷テスト |
| **可用性** | 99.5%以上 | 監視システム |

#### セキュリティ要件

- **認証・認可**: 多要素認証（MFA）対応、OAuth 2.0対応
- **データ暗号化**: 転送時（TLS 1.3）、保存時（AES-256）
- **プライバシー保護**: 個人情報保護法対応
- **アクセス制御**: ロールベースアクセス制御（RBAC）

#### スケーラビリティ要件

- **水平スケーリング**: クラウドネイティブアーキテクチャ
- **データベーススケーリング**: 読み取りレプリカ対応
- **キャッシュ戦略**: Redis等によるキャッシュ層

---

## 3. 技術スタック（推奨）

### 3.1 推奨技術スタック

#### バックエンド（RAGシステム）

| レイヤー | 技術 | 選定理由 |
|:--|:--|:--|
| **言語** | Python 3.11+ | AI/ML統合、豊富なライブラリ、LangChain対応 |
| **フレームワーク** | FastAPI | 高速、非同期対応、自動ドキュメント生成 |
| **RAGフレームワーク** | LangChain / LlamaIndex | 実績、コミュニティ、取扱説明書向けカスタマイズが容易 |
| **LLM** | GPT-4 / Claude 3.5 / Gemini 1.5 Pro | マルチプロバイダー対応、コスト最適化 |
| **エンベディング** | OpenAI text-embedding-3-large | 高精度、多言語対応 |
| **ベクトルDB** | Supabase + pgvector（第一候補） | PostgreSQL拡張、コスト効率、Supabase統合 |
| **代替案** | Pinecone / Weaviate | スケーラビリティが必要な場合 |

#### フロントエンド

| プラットフォーム | 技術 | 選定理由 |
|:--|:--|:--|
| **Web管理画面** | Next.js + TypeScript | SSR、API Routes、Vercel統合、開発効率 |
| **モバイルアプリ** | Flutter | クロスプラットフォーム、既存計画、AR機能対応 |

#### インフラ・データベース

| カテゴリ | 技術 | 選定理由 |
|:--|:--|:--|
| **BaaS** | Supabase | PostgreSQL、認証、リアルタイム、コスト効率 |
| **データベース** | Neon (PostgreSQL) または Supabase | サーバーレス、自動スケーリング、Supabase統合 |
| **ホスティング（Web）** | Vercel | Next.js統合、自動デプロイ、CDN |
| **ホスティング（API）** | AWS / Azure / GCP | スケーラビリティ、既存パートナーとの整合性 |
| **キャッシュ** | Redis | 高速、セッション管理 |
| **ストレージ** | Supabase Storage または AWS S3 | ファイルストレージ、CDN統合 |

#### 外部API連携

| 用途 | API/サービス | 備考 |
|:--|:--|:--|
| **車両データ** | OBD-II、コネクテッドカーAPI | Phase 2で本格実装 |
| **天気情報** | OpenWeatherMap API等 | Phase 3で本格実装 |
| **地図データ** | Google Maps API等 | Phase 3で本格実装 |

---

### 3.2 技術スタック選定の根拠

**既存の開発計画との整合性:**
- 既存計画ではPython + FastAPI、Flutterが検討されている
- プロンプトではNext.js + Supabaseが推奨されている

**推奨アプローチ（ハイブリッド）:**
- **RAGシステム（バックエンドAPI）**: Python + FastAPI + LangChain
- **Web管理画面**: Next.js + TypeScript + Supabase + Vercel
- **モバイルアプリ**: Flutter
- **データベース**: Supabase（PostgreSQL）+ pgvector（ベクトル検索用）

**理由:**
- RAGシステムはPython + LangChainが最適（既存の開発計画と整合）
- Web管理画面はNext.js + Supabaseで開発効率が高い
- モバイルアプリはFlutterでクロスプラットフォーム開発
- データベースはSupabase + pgvectorでベクトル検索も対応可能

---

## 4. 開発スケジュール（Phase 1: 0-9ヶ月）

### 4.1 開発フェーズ

#### フェーズ1-1: RAGシステム構築（0-3ヶ月）

**目的**: 検索型AIの基盤構築

**主要タスク:**
1. **データクリーニング・構造化機能の実装**（3-4週間）
   - PDFパーサーの実装
   - 構造解析アルゴリズムの実装
   - メタデータ付与機能の実装

2. **セマンティック境界チャンキングの実装**（2-3週間）
   - 章・節・手順単位での分割アルゴリズム
   - コンテキストオーバーラップ設計

3. **マルチベクトル戦略の実装**（2-3週間）
   - タイトル・本文・メタデータの個別ベクトル化
   - ベクトルDBへの保存

4. **ハイブリッド検索の実装**（3-4週間）
   - ベクトル検索の実装
   - キーワード検索（BM25等）の実装
   - RRF（Reciprocal Rank Fusion）の実装
   - 検索前フィルタリングの実装

**成果物:**
- データクリーニング・構造化システム
- ベクトルDB構築
- ハイブリッド検索API

---

#### フェーズ1-2: 検索型AI実装（2-5ヶ月）

**目的**: 9つのインテント分類に対応した検索型AIの実装

**主要タスク:**
1. **インテント検出・ルーティングの実装**（3-4週間）
   - 9つのインテント分類の検出アルゴリズム
   - インテント別ルーティングロジック
   - プロンプトテンプレートの実装（10種類以上）

2. **回答生成機能の実装**（3-4週間）
   - LLM連携（GPT-4 / Claude 3.5 / Gemini 1.5 Pro）
   - マルチプロバイダー対応
   - 回答品質管理

3. **API実装**（2-3週間）
   - RESTful APIの実装
   - エラーハンドリング
   - ログ・監視機能

**成果物:**
- 検索型AI API
- インテント検出精度95%+
- 回答精度90%以上、レスポンス時間1秒以下

---

#### フェーズ1-3: プロアクティブ機能実装（3-6ヶ月）

**目的**: 限定プロアクティブ型（緊急時自動案内、タイミングベース案内）の実装

**主要タスク:**
1. **緊急時自動案内の実装**（4-5週間）
   - 車両データ連携（OBD-II、コネクテッドカーAPI）
   - 警告灯・異常検知の判定ロジック
   - 自動案内の生成・配信

2. **タイミングベース案内の実装**（3-4週間）
   - ユーザー状態管理（納車日、初回利用日等）
   - タイミング判定エンジン
   - 案内コンテンツの生成・配信

3. **よくある質問の自動提示の実装**（2-3週間）
   - ユーザーコンテキスト分析
   - FAQマッチングアルゴリズム
   - 自動提示機能

**成果物:**
- 緊急時自動案内システム
- タイミングベース案内システム
- プロアクティブ案内利用率40%以上
- 緊急時問合せ削減率50%以上

---

#### フェーズ1-4: フロントエンド開発（並行、0-9ヶ月）

**目的**: スマホアプリ、Web管理画面の開発

**主要タスク:**

**スマホアプリ（Flutter）:**
1. **基本UI実装**（4-6週間）
   - 検索画面
   - 回答表示画面
   - プロアクティブ通知画面

2. **API連携**（2-3週間）
   - RAG API連携
   - プロアクティブAPI連携

3. **プッシュ通知機能**（2-3週間）
   - Firebase Cloud Messaging連携
   - 通知設定機能

**Web管理画面（Next.js）:**
1. **基本UI実装**（3-4週間）
   - ダッシュボード
   - データ分析画面
   - 設定画面

2. **API連携**（2-3週間）
   - Supabase連携
   - データ分析API連携

**成果物:**
- iOS/Androidアプリ（基本機能）
- Web管理画面（基本機能）

---

### 4.2 開発体制（想定）

**必要なスキルセット:**
- AI/MLエンジニア（RAG、LLM、データエンジニアリング）：2-3名
- バックエンドエンジニア（Python、FastAPI）：1-2名
- フロントエンドエンジニア（Next.js、TypeScript）：1-2名
- Flutterエンジニア：1-2名
- プロダクトマネージャー：1名
- QAエンジニア：1名

**合計**: 7-11名

---

## 5. 成功基準（KPI）

### 5.1 Phase 1の成功基準

| カテゴリ | 指標 | 目標値 | 測定方法 |
|:--|:--|:--|:--|
| **技術** | 回答精度 | 90%以上 | 評価データセットでの測定 |
| **技術** | レスポンス時間 | 1秒以下 | API応答時間の測定 |
| **技術** | インテント検出精度 | 95%+ | インテント検出の精度測定 |
| **ビジネス** | 問合せ削減率 | 20-30%（最終目標30%以上） | コールセンター問い合わせ件数 |
| **ビジネス** | 緊急時問合せ削減率 | 50%以上 | 緊急時問い合わせ件数 |
| **ユーザー** | プロアクティブ案内利用率 | 40%以上 | アプリログ分析 |
| **ユーザー** | 情報提示の満足度 | 4.5/5.0以上 | ユーザー満足度アンケート |

---

## 6. 制約条件

### 6.1 予算制約

**初期投資**: 2.5億円（R&D費用）
- 基本機能開発：1.5億円
- 緊急対応・先読みガイド機能開発：1.0億円

**内訳（想定）:**
- 人件費：60-70%
- インフラコスト：10-15%
- 外部パートナー・ツール：15-20%
- その他：5-10%

### 6.2 期間制約

**Phase 1**: 0-9ヶ月（2026年度内に完了）

**マイルストーン:**
- 3ヶ月：RAGシステム基盤完成
- 6ヶ月：検索型AI + プロアクティブ機能（限定版）完成
- 9ヶ月：フロントエンド完成、PoC開始

### 6.3 技術的制約

- **車両データ連携**: OBD-II、コネクテッドカーAPIの具体的な連携方法が未確定（Phase 1では簡易版で対応）
- **OEM要件**: セキュリティ要件、ブランドガイドラインが未確定（後で対応が必要）

---

## 7. 開発上の重要な考慮事項

### 7.1 技術的優位性の確保

**DOI独自のRAG最適化技術を実装することが最重要**

- セマンティック境界チャンキング
- マルチベクトル戦略
- ハイブリッド検索（RRF）
- 検索前フィルタリング

**これらが競合との差別化要因となるため、必ず実装すること**

### 7.2 「届く」体験の実装

**重要**: 検索型のみでは「取扱説明書を読まないユーザー」は使わない

**Phase 1で必ず実装すべき「届く」要素:**
- 緊急時自動案内
- タイミングベース案内
- よくある質問の自動提示

### 7.3 データ品質の確保

- データクリーニング・構造化は回答精度に直結するため、品質を最優先
- 継続的な品質改善プロセスの構築

### 7.4 コスト最適化

- APIコストの削減（検索前フィルタリング、キャッシュ戦略）
- **目標**: APIコスト/質問を¥2-3に抑制（一般的RAGは¥5-10）

---

## 8. 開発で参照すべき資料

### 8.1 既存の開発計画書

- `docs/development/phase0-requirements.md`: Phase 0の技術要件
- `docs/development/rag-data-strategy.md`: RAGシステムのデータ戦略
- `docs/development/車両機能通知_system-development-plan.md`: システム開発計画

### 8.2 技術的詳細

- **データ最適化レイヤー**: 事業計画書 2.5.1
- **インテント検出・ルーティング**: 事業計画書 2.5.2
- **情報アーキテクチャ**: 事業計画書 3

---

## 9. 開発部門への質問事項

### 優先度：高

1. **技術スタックの最終決定**
   - RAGシステム：Python + FastAPI + LangChain で問題ないか？
   - Web管理画面：Next.js + Supabase + Vercel で問題ないか？
   - モバイルアプリ：Flutter で問題ないか？

2. **開発体制の確認**
   - 既存メンバーで対応可能なスキルは何か？
   - 新規採用が必要なスキル・人数は？

3. **開発スケジュールの実現可能性**
   - Phase 1（0-9ヶ月）のスケジュールは実現可能か？
   - リスク要因は何か？

4. **車両データ連携の技術的実現可能性**
   - OBD-II、コネクテッドカーAPIの連携は技術的に可能か？
   - Phase 1で簡易版を実装することは可能か？

### 優先度：中

5. **インフラコストの見積もり**
   - Phase 1のインフラコスト（クラウド、データベース、API等）の月額見積もりは？

6. **セキュリティ要件の確認**
   - OEMから要求されるセキュリティ要件は何か？
   - 実装に必要な期間・コストは？

---

## 10. 次のステップ

### 開発部門での確認事項

1. **技術スタックの最終決定**
   - 上記の推奨技術スタックで問題ないか確認
   - 代替案があれば提案

2. **開発体制の確定**
   - 必要な人材の確保計画
   - 外部パートナーの活用可否

3. **詳細設計の開始**
   - Phase 1の詳細設計書の作成
   - アーキテクチャ設計の開始

4. **PoC準備**
   - 2026年度内のPoC実施に向けた準備

---

**作成者**: 事業開発部門  
**連絡先**: [連絡先情報]  
**次回更新予定**: 開発部門からのフィードバック後
