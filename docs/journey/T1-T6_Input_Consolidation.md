# T1～T6 インプット情報の整理

T1～T6 が受け取る情報を、**入手元**・**ファクト／Nonファクト**・**ユーザー／車両／外部のどれに属するか**で整理したものです。

---

## 凡例

| 項目 | 意味 |
|------|------|
| **入手元** | その情報をどこから取得するか（ユーザー操作、車両センサー、前工程の出力、知識ベース 等） |
| **ファクト** | 観測・記録・入力された事実。推測やスコアを含まない。 |
| **Nonファクト** | 分類・推測・確度・スコアなど、システムや前工程が付与した解釈を含む。 |
| **ユーザー** | ユーザーの操作・入力・回答・状態に紐づく情報。 |
| **車両** | 車両の仕様・センサー・操作ログ・車載機（IVI）などに紐づく情報。 |
| **外部** | 位置・天候・時刻・外部DB・マニュアル・知識ベースなど、車・ユーザー以外のソース。 |
| **システム** | 前工程（T1～T5）の出力や、自システムが持つマスタ・設定。 |

---

## T1：事象切り出し（Input）

| 入力項目 | 入手元 | ファクト／Nonファクト | ユーザー／車両／外部／システム |
|----------|--------|------------------------|--------------------------------|
| 困りごと選択 | ユーザーがUIで選択 | ファクト（選択したという事実） | ユーザー |
| 自由入力テキスト | ユーザーが入力 | ファクト（入力内容そのもの） | ユーザー |
| 写真・画像 | ユーザーがアップロード | ファクト（撮影・投稿された画像） | ユーザー |
| 操作失敗の繰り返し | 車載機・アプリの操作ログ | ファクト（記録された操作・結果） | 車両 |
| 同一画面の往復・設定失敗ログ等 | 同上 | ファクト | 車両 |
| 操作間隔の不自然な長さ | 同上（タイムスタンプから算出） | ファクト（記録に基づく） | 車両 |
| 時間帯（day/night等） | 端末時刻・車両時刻 | ファクト（時刻）。意味ラベル化で解釈あり | 外部（時刻）／システム（ラベル） |
| 位置タイプ（home/outside/highway） | GPS・位置情報 | ファクト（位置）。ラベル化で解釈あり | 外部／車両 |
| 走行状態（stopped/moving） | 車両センサー・IVI | ファクト（車両が出力した状態） | 車両 |
| 環境要因（天候・気温） | 車両・外部API | ファクト（観測値） | 車両／外部 |

※ T1 は「兆候」を入力とし、出力（event_id, confidence, subtype 等）は **Nonファクト**（分類・推測の結果）。

---

## T2：原因候補列挙（Input）

| 入力項目 | 入手元 | ファクト／Nonファクト | ユーザー／車両／外部／システム |
|----------|--------|------------------------|--------------------------------|
| event_id | T1出力 | Nonファクト（T1の分類結果） | システム |
| subtype | T1出力 | Nonファクト（T1の細分類） | システム |
| 車種・年式・グレード・地域仕様 | 車両登録情報・VIN等 | ファクト（登録されている仕様） | 車両 |
| 装備の有無 | 同上・カタログDB | ファクト | 車両／外部 |
| 直近の故障・交換・利用状況 | 整備記録・利用履歴 | ファクト（記録がある場合） | 車両／外部 |
| 再発・関連事象の有無 | 同上・過去セッション | ファクト or なし | 車両／システム |

---

## T3：観察点選定（Input）

| 入力項目 | 入手元 | ファクト／Nonファクト | ユーザー／車両／外部／システム |
|----------|--------|------------------------|--------------------------------|
| event_id, confidence, context_labels, subtype | T1出力 | Nonファクト | システム |
| cause_candidates[] | T2出力 | Nonファクト（列挙結果。知識に基づくが「候補」なので解釈含む） | システム |
| 故障木・トラブルシュート表 | 知識ベース・マニュアル | ファクト（記載内容）。組織の知見 | 外部 |
| 事象と原因候補の対応関係 | 同上 | 同上 | 外部 |
| センサー有無・ユーザー確認可能か | 車両仕様・設計 | ファクト | 車両 |
| 写真・数値・Yes/No の現実性 | 設計・UX条件 | 解釈含む | システム |
| 急いでいる／不安／初心者／走行中・停止中 | T1のcontext_labels、ユーザー明示入力 | 混在（明示入力はファクト、推定はNonファクト） | ユーザー／システム |

---

## T4：仮説評価・順位付け（Input）

| 入力項目 | 入手元 | ファクト／Nonファクト | ユーザー／車両／外部／システム |
|----------|--------|------------------------|--------------------------------|
| cause_candidates[] | T2出力 | Nonファクト | システム |
| question_id, answer（T3の回答） | ユーザーがT3の質問に回答 | **ファクト**（ユーザーが答えた内容） | ユーザー |
| 観察履歴（複数ラウンド） | 過去のT3回答の蓄積 | ファクト（回答の記録） | ユーザー／システム |
| expected_split（T3の出力） | T3出力 | Nonファクト（質問設計に基づく期待分割） | システム |
| 失敗回数・環境・再現性 | 操作ログ・ユーザー回答 | ファクト（記録・回答） | ユーザー／車両 |
| 走行中／停止中など | T1のcontext_labels 等 | ファクト or Nonファクト | 車両／システム |

---

## T5：行動選択（Input）

| 入力項目 | 入手元 | ファクト／Nonファクト | ユーザー／車両／外部／システム |
|----------|--------|------------------------|--------------------------------|
| ranked_causes[] 上位、status | T4出力 | Nonファクト（確信度・順位・状態は推測結果） | システム |
| context_labels, urgency, psychological_risk | T1出力 | Nonファクト（T1が付与したラベル・スコア） | システム |
| cause_candidates[].risk_level | T2出力 | Nonファクト（知識・設計に基づく付与） | システム |
| DIY可否、過去の選好、初心者か | ユーザープロファイル・過去行動 | 登録されていればファクト、推定ならNonファクト | ユーザー／システム |
| 破損・感電・運転リスク等の注意 | 知識ベース・T2のrisk_level | ファクト（記載）／Nonファクト（どの案内を出すかは解釈） | 外部／システム |

---

## T6：結果評価・再探索（Input）

| 入力項目 | 入手元 | ファクト／Nonファクト | ユーザー／車両／外部／システム |
|----------|--------|------------------------|--------------------------------|
| action_result（成功／失敗／不明） | ユーザーが短問に回答 | **ファクト**（ユーザーが答えた結果） | ユーザー |
| 実施した action_id | ユーザーが選んだT5のカード | ファクト（選択の記録） | ユーザー／システム |
| 「消えましたか？」等の短問の回答 | ユーザー回答 | ファクト | ユーザー |
| 再点灯したか、走行に異常があるか等 | ユーザー回答 | ファクト | ユーザー |
| 試したT5の行動一覧 | セッション内の実行履歴 | ファクト（記録） | システム |
| T3の観察履歴 | セッション内のT3回答履歴 | ファクト（記録） | システム |

---

## まとめ：情報の流れと性質

- **ファクトの主な入手元**  
  - **ユーザー**：困りごと選択、自由入力、写真、T3の回答、T6の結果回答（成功／失敗）、実施した行動の選択。  
  - **車両**：操作ログ、走行状態、車種・仕様、センサー。  
  - **外部**：位置・時刻・天候、マニュアル・知識ベースの記載、整備記録。

- **Nonファクトの主な入手元**  
  - **システム（前工程）**：T1の event_id / subtype / confidence / context_labels、T2の cause_candidates、T3の expected_split、T4の ranked_causes / status、T5の action_cards。  
  - これらは「観測された事実」ではなく、**分類・推測・スコア・確信度**を含む。

- **設計上の留意点**  
  - ファクトは「記録・入力・観測」として信頼性を揃え、Nonファクトは「どの工程の出力をどう使うか」を明示すると、T1～T6 全体の入力設計がぶれにくい。
