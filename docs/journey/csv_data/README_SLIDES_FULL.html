<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Journey Graph CSV ãƒ‡ãƒ¼ã‚¿ï¼ˆREADMEã‚¹ãƒ©ã‚¤ãƒ‰ï¼‰</title>
  <style>
    :root { color-scheme: light; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Meiryo, sans-serif;
      background: #fff;
      color: #111;
    }
    .app {
      height: 100%;
      display: grid;
      grid-template-rows: auto 1fr auto;
    }
    .topbar {
      padding: 10px 14px;
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      gap: 10px;
      align-items: center;
      justify-content: space-between;
    }
    .topbar .title { font-weight: 700; }
    .topbar .meta { color: #6b7280; font-size: 12px; }
    .stage {
      padding: 18px;
      overflow: auto;
    }
    .slide {
      max-width: 1100px;
      margin: 0 auto;
      padding: 26px 30px;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.06);
    }
    .nav {
      padding: 10px 14px;
      border-top: 1px solid #e5e7eb;
      display: flex;
      gap: 10px;
      align-items: center;
      justify-content: space-between;
    }
    button {
      appearance: none;
      border: 1px solid #d1d5db;
      background: #fff;
      padding: 8px 12px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
    }
    button:disabled { opacity: 0.5; cursor: not-allowed; }
    .counter { color: #6b7280; font-size: 12px; }
    pre {
      background: #0b1020;
      color: #e5e7eb;
      padding: 12px 14px;
      border-radius: 10px;
      overflow: auto;
      line-height: 1.45;
    }
    code { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
    h1, h2, h3 { margin-top: 0.2em; }
    hr { border: 0; border-top: 1px solid #e5e7eb; margin: 18px 0; }
    a { color: #2563eb; }
    ul, ol { padding-left: 1.2em; }
  </style>
</head>
<body>
  <div class="app">
    <div class="topbar">
      <div>
        <div class="title">Journey Graph CSV ãƒ‡ãƒ¼ã‚¿ï¼ˆREADMEã‚¹ãƒ©ã‚¤ãƒ‰ï¼‰</div>
        <div class="meta">â†/â†’ã‚­ãƒ¼ã§ã‚‚ç§»å‹•ã§ãã¾ã™ï¼ˆHTMLå˜ä½“ãƒ»ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œï¼‰</div>
      </div>
      <div class="counter" id="counter"></div>
    </div>

    <div class="stage">
      <div class="slide" id="slide"></div>
    </div>

    <div class="nav">
      <div style="display:flex; gap:10px; align-items:center;">
        <button id="prevBtn">â† å‰</button>
        <button id="nextBtn">æ¬¡ â†’</button>
      </div>
      <div class="counter" id="hint"></div>
    </div>
  </div>

  <!-- README.md æœ¬æ–‡ï¼ˆçœç•¥ãªã—ãƒ»ãã®ã¾ã¾åŸ‹ã‚è¾¼ã¿ï¼‰ -->
  <textarea id="source" style="display:none;"># Journey Graph CSV ãƒ‡ãƒ¼ã‚¿

## æ¦‚è¦

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€å–æ‰±èª¬æ˜æ›¸DXã‚·ã‚¹ãƒ†ãƒ ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ã‚’å®šç¾©ã™ã‚‹CSVãƒ‡ãƒ¼ã‚¿ãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

æ–°ã—ã„ãƒ†ãƒ¼ãƒã®ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã™ã‚‹æ‰‹é †:

### 1. å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
`THEME-XXX_input.txt`ã‚’è¨˜å·ãƒ™ãƒ¼ã‚¹å½¢å¼ã§è¨˜è¿°
```
ãƒ†ãƒ¼ãƒ: æ–°ã—ã„å•é¡Œ
ID: THEME-XXX
ç·Šæ€¥åº¦: high

â–¼ å•é¡Œç™ºç”Ÿ
  ? ç¢ºèª?
    â†’ ã¯ã„: æ¬¡ã¸
    â†’ ã„ã„ãˆ: åˆ¥ã®æ¬¡ã¸
```

### 2. è‡ªå‹•å¤‰æ›å®Ÿè¡Œ
```bash
py generate_journey_csv.py THEME-XXX_input.txt
```

### 3. ç¢ºèª
- `THEME-XXX_visual_flow.html`ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã
- CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªãƒ»èª¿æ•´

**è©³ç´°ã¯ `HOW_TO_CREATE_FLOW.md` ã‚’å‚ç…§**

---

## ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

### 1. Theme.csvï¼ˆãƒ†ãƒ¼ãƒå®šç¾©ï¼‰
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç›´é¢ã™ã‚‹å•é¡Œã‚„çŠ¶æ³ã®ãƒ†ãƒ¼ãƒã‚’å®šç¾©ã—ã¾ã™ã€‚

**ã‚«ãƒ©ãƒ :**
- `theme_id`: ãƒ†ãƒ¼ãƒã®ä¸€æ„è­˜åˆ¥å­
- `theme_name`: ãƒ†ãƒ¼ãƒå
- `description`: ãƒ†ãƒ¼ãƒã®èª¬æ˜
- `urgency_level`: ç·Šæ€¥åº¦ï¼ˆhigh/medium/lowï¼‰
- `primary_intents`: ä¸»è¦ãªãƒ¦ãƒ¼ã‚¶ãƒ¼æ„å›³ï¼ˆãƒ‘ã‚¤ãƒ—åŒºåˆ‡ã‚Šï¼‰
- `notes`: å‚™è€ƒ

### 2. JourneyNode.csvï¼ˆã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ãƒãƒ¼ãƒ‰å®šç¾©ï¼‰
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ã®å„çŠ¶æ…‹ï¼ˆãƒãƒ¼ãƒ‰ï¼‰ã‚’å®šç¾©ã—ã¾ã™ã€‚

**ã‚«ãƒ©ãƒ :**
- `node_id`: ãƒãƒ¼ãƒ‰ã®ä¸€æ„è­˜åˆ¥å­
- `theme_id`: æ‰€å±ã™ã‚‹ãƒ†ãƒ¼ãƒID
- `phase`: ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆç•°å¸¸æ¤œçŸ¥/åŸå› ä»®èª¬/åˆ¤å®š/å¯¾å¿œé¸æŠ/å¯¾å¿œå®Œäº†ãªã©ï¼‰
- `state_description`: çŠ¶æ…‹ã®èª¬æ˜
- `trigger`: ãƒˆãƒªã‚¬ãƒ¼ã¨ãªã‚‹è¡Œå‹•
- `hypotheses`: ä»®èª¬ï¼ˆãƒ‘ã‚¤ãƒ—åŒºåˆ‡ã‚Šï¼‰
- `confidence_level`: ä¿¡é ¼åº¦ï¼ˆ0-1ï¼‰
- `notes`: å‚™è€ƒ

### 3. CheckCondition.csvï¼ˆåˆ¤å®šæ¡ä»¶å®šç¾©ï¼‰
å„ãƒãƒ¼ãƒ‰ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç¢ºèªã™ã‚‹è³ªå•ã‚’å®šç¾©ã—ã¾ã™ã€‚

**ã‚«ãƒ©ãƒ :**
- `check_id`: åˆ¤å®šæ¡ä»¶ã®ä¸€æ„è­˜åˆ¥å­
- `node_id`: å¯¾è±¡ãƒãƒ¼ãƒ‰ID
- `question`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®è³ªå•æ–‡
- `answer_type`: å›ç­”ã‚¿ã‚¤ãƒ—ï¼ˆboolean/choice/textï¼‰
- `answers`: å›ç­”ã®é¸æŠè‚¢ï¼ˆãƒ‘ã‚¤ãƒ—åŒºåˆ‡ã‚Šï¼‰
- `supports`: ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»®èª¬ï¼ˆãƒ‘ã‚¤ãƒ—åŒºåˆ‡ã‚Šï¼‰
- `notes`: å‚™è€ƒ

### 4. Edge.csvï¼ˆåˆ†å²å®šç¾©ï¼‰
ãƒãƒ¼ãƒ‰é–“ã®é·ç§»ï¼ˆã‚¨ãƒƒã‚¸ï¼‰ã‚’å®šç¾©ã—ã¾ã™ã€‚

**ã‚«ãƒ©ãƒ :**
- `edge_id`: ã‚¨ãƒƒã‚¸ã®ä¸€æ„è­˜åˆ¥å­
- `from_node_id`: é·ç§»å…ƒãƒãƒ¼ãƒ‰ID
- `condition`: åˆ¤å®šæ¡ä»¶IDï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- `condition_value`: æ¡ä»¶å€¤ï¼ˆyes/no/choiceã®å€¤ãªã©ï¼‰
- `to_type`: é·ç§»å…ˆã‚¿ã‚¤ãƒ—ï¼ˆnode/guide/alertï¼‰
- `to_id`: é·ç§»å…ˆID
- `priority`: å„ªå…ˆåº¦

### 5. Guide.csvï¼ˆã‚¬ã‚¤ãƒ‰å®šç¾©ï¼‰
æœ€çµ‚çš„ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æç¤ºã™ã‚‹ã‚¬ã‚¤ãƒ‰ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å®šç¾©ã—ã¾ã™ã€‚

**ã‚«ãƒ©ãƒ :**
- `guide_id`: ã‚¬ã‚¤ãƒ‰ã®ä¸€æ„è­˜åˆ¥å­
- `guide_type`: ã‚¬ã‚¤ãƒ‰ã‚¿ã‚¤ãƒ—ï¼ˆprocedure/alert/explanation/contactï¼‰
- `title`: ã‚¬ã‚¤ãƒ‰ã®ã‚¿ã‚¤ãƒˆãƒ«
- `estimated_time`: æ‰€è¦æ™‚é–“
- `risk_level`: ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«ï¼ˆhigh/medium/low/immediateï¼‰
- `notes`: å‚™è€ƒ

### 6. IntentOntology.csvï¼ˆæ„å›³ã‚ªãƒ³ãƒˆãƒ­ã‚¸ãƒ¼ï¼‰
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„å›³ã‚’åˆ†é¡ã™ã‚‹å…±é€šå®šç¾©ã§ã™ã€‚

**ã‚«ãƒ©ãƒ :**
- `intent_code`: æ„å›³ã‚³ãƒ¼ãƒ‰ï¼ˆI1-I6ï¼‰
- `intent_name`: æ„å›³å
- `description`: èª¬æ˜
- `default_priority`: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå„ªå…ˆåº¦

**æ„å›³ã®ç¨®é¡:**
- **I1**: ä»Šã™ãä½¿ã„ãŸã„ï¼ˆç·Šæ€¥å¯¾å¿œï¼‰
- **I2**: åŸå› ã‚’çŸ¥ã‚ŠãŸã„ï¼ˆç†è§£ä¿ƒé€²ï¼‰
- **I3**: è‡ªåˆ†ã§ç›´ã—ãŸã„ï¼ˆDIYå¯¾å¿œï¼‰
- **I4**: å£Šã—ãŸããªã„ãƒ»å®‰å…¨å„ªå…ˆï¼ˆãƒªã‚¹ã‚¯å›é¿ï¼‰
- **I5**: èª°ã‹ã«é ¼ã¿ãŸã„ï¼ˆå°‚é–€å®¶ä¾é ¼ï¼‰
- **I6**: å¾Œã§å¯¾å¿œã—ãŸã„ï¼ˆå›é¿ç­–ï¼‰

### 7. NodeIntent.csvï¼ˆãƒãƒ¼ãƒ‰Ã—æ„å›³ãƒãƒƒãƒ”ãƒ³ã‚°ï¼‰
å„ãƒãƒ¼ãƒ‰ã«ãŠã‘ã‚‹ä¸»è¦ãªæ„å›³ã‚’å®šç¾©ã—ã¾ã™ã€‚

**ã‚«ãƒ©ãƒ :**
- `node_id`: ãƒãƒ¼ãƒ‰ID
- `primary_intent`: ä¸»è¦æ„å›³ã‚³ãƒ¼ãƒ‰
- `secondary_intent`: å‰¯æ¬¡æ„å›³ã‚³ãƒ¼ãƒ‰
- `confidence`: ä¿¡é ¼åº¦ï¼ˆ0-1ï¼‰
- `notes`: å‚™è€ƒ

### 8. IntentAction.csvï¼ˆæ„å›³åˆ¥ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®šç¾©ï¼‰
å„æ„å›³ã«å¯¾å¿œã™ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®šç¾©ã—ã¾ã™ã€‚

**ã‚«ãƒ©ãƒ :**
- `intent_code`: æ„å›³ã‚³ãƒ¼ãƒ‰
- `action_type`: ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ—ï¼ˆguide/alert/contactï¼‰
- `action_id`: ã‚¢ã‚¯ã‚·ãƒ§ãƒ³IDï¼ˆã‚¬ã‚¤ãƒ‰IDãªã©ï¼‰
- `priority`: å„ªå…ˆåº¦
- `notes`: å‚™è€ƒ

## ãƒ‡ãƒ¼ã‚¿ã®ä½¿ã„æ–¹

### 1. ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ã®è¾¿ã‚Šæ–¹

```
Theme â†’ JourneyNode â†’ CheckCondition â†’ Edge â†’ Guide
```

**ä¾‹: ã‚¹ãƒãƒ¼ãƒˆã‚­ãƒ¼ã§ãƒ‰ã‚¢ãŒé–‹ã‹ãªã„å ´åˆ**

1. **Theme.csv**: `THEME-001`ï¼ˆãƒ‰ã‚¢ãŒé–‹ã‹ãªã„ï¼‰ã‚’ç‰¹å®š
2. **JourneyNode.csv**: `NODE-001A`ï¼ˆåˆæœŸãƒãƒ¼ãƒ‰ï¼‰ã‹ã‚‰é–‹å§‹
3. **CheckCondition.csv**: `CHECK-001A`ï¼ˆã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ç‚¹ç¯ç¢ºèªï¼‰ã‚’å®Ÿè¡Œ
4. **Edge.csv**: å›ç­”ã«å¿œã˜ã¦æ¬¡ã®ãƒãƒ¼ãƒ‰ã¸é·ç§»
   - `no` â†’ `NODE-001B`ï¼ˆã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ç‚¹ç¯ã—ãªã„ï¼‰
   - `yes` â†’ `NODE-001D`ï¼ˆã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ç‚¹ç¯ã™ã‚‹ï¼‰
5. **NodeIntent.csv**: å„ãƒãƒ¼ãƒ‰ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼æ„å›³ã‚’æ¨æ¸¬
6. **Guide.csv**: æœ€çµ‚çš„ãªã‚¬ã‚¤ãƒ‰ã‚’æç¤º

### 2. æ„å›³æ¨æ¸¬ã®æµã‚Œ

```
JourneyNode â†’ NodeIntent â†’ IntentAction â†’ Guide
```

**ä¾‹: NODE-001Bã§ã®æ„å›³æ¨æ¸¬**

1. **NodeIntent.csv**: `NODE-001B`ã®æ„å›³ã‚’ç¢ºèª
   - `primary_intent`: I3ï¼ˆè‡ªåˆ†ã§ç›´ã—ãŸã„ï¼‰
   - `secondary_intent`: I1ï¼ˆä»Šã™ãä½¿ã„ãŸã„ï¼‰
2. **L2æ–‡è„ˆãƒ‡ãƒ¼ã‚¿**ã§å„ªå…ˆåº¦ã‚’èª¿æ•´
   - æ™‚åˆ»ãŒæ·±å¤œ â†’ I1ã®å„ªå…ˆåº¦UP
   - éå»ã«é›»æ± äº¤æ›çµŒé¨“ã‚ã‚Š â†’ I3ã®å„ªå…ˆåº¦UP
3. **IntentAction.csv**: æ„å›³ã«å¿œã˜ãŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’é¸æŠ
   - I1 â†’ `GUIDE-001`ï¼ˆæ©Ÿæ¢°ã‚­ãƒ¼ã®å–ã‚Šå‡ºã—æ–¹ï¼‰
   - I3 â†’ `GUIDE-005`ï¼ˆé›»æ± äº¤æ›æ‰‹é †ï¼‰
4. **Guide.csv**: ã‚¬ã‚¤ãƒ‰ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æç¤º

## ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ãƒ•ãƒ­ãƒ¼ä¾‹

### THEME-001: ã‚¹ãƒãƒ¼ãƒˆã‚­ãƒ¼ã§ãƒ‰ã‚¢ãŒé–‹ã‹ãªã„

```
NODE-001Aï¼ˆåˆæœŸçŠ¶æ…‹ï¼‰
    â†“
CHECK-001A: ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ç‚¹ç¯ç¢ºèª
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
â”‚               â”‚
no              yes
â”‚               â”‚
â†“               â†“
NODE-001B       NODE-001D
ï¼ˆç‚¹ç¯ã—ãªã„ï¼‰   ï¼ˆç‚¹ç¯ã™ã‚‹ï¼‰
â†“               â†“
CHECK-001B      CHECK-001D
æ„å›³ç¢ºèª        æ„å›³ç¢ºèª
â†“               â†“
â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
â”‚           â”‚   â”‚           â”‚
immediate   root immediate   battery
â”‚           â”‚   â”‚           â”‚
â†“           â†“   â†“           â†“
NODE-001F   NODE-001E       NODE-001P
æ©Ÿæ¢°ã‚­ãƒ¼    é›»æ± äº¤æ›        è²©å£²åº—äºˆç´„
â†“           â†“               â†“
GUIDE-001   GUIDE-005       GUIDE-006
æ©Ÿæ¢°ã‚­ãƒ¼ã®  é›»æ± äº¤æ›æ‰‹é †    è²©å£²åº—äºˆç´„ãƒ»é€£çµ¡å…ˆ
å–ã‚Šå‡ºã—æ–¹
```

## L2æ–‡è„ˆãƒ‡ãƒ¼ã‚¿ã¨ã®é€£æº

å„ãƒãƒ¼ãƒ‰ã§L2æ–‡è„ˆãƒ‡ãƒ¼ã‚¿ã‚’æ´»ç”¨ã—ã¦æ„å›³æ¨æ¸¬ã®ç²¾åº¦ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚

**æ´»ç”¨ã™ã‚‹æ–‡è„ˆãƒ‡ãƒ¼ã‚¿:**
- **æ™‚åˆ»**: æ·±å¤œ/æ—©æœ â†’ å³æ™‚å¯¾å¿œã®å„ªå…ˆåº¦UP
- **å ´æ‰€**: é éš”åœ° â†’ è‡ªåŠ›å¯¾å¿œã®å„ªå…ˆåº¦UP
- **å¤©å€™**: æ‚ªå¤©å€™ â†’ å®‰å…¨å„ªå…ˆã®æ„å›³UP
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ã‚­ãƒ«ãƒ¬ãƒ™ãƒ«**: åˆå¿ƒè€… â†’ ç°¡å˜ãªæ–¹æ³•ã®å„ªå…ˆåº¦UP
- **éå»ã®çµŒé¨“**: é¡ä¼¼å•é¡Œã®è§£æ±ºå±¥æ­´ â†’ åŒã˜æ–¹æ³•ã®å„ªå…ˆåº¦UP

## L3ã§ã®æ„å›³æ¨æ¸¬ãƒ­ã‚¸ãƒƒã‚¯

```python
# æ“¬ä¼¼ã‚³ãƒ¼ãƒ‰
def estimate_intent(node_id, context_data):
    # NodeIntentã‹ã‚‰åŸºæœ¬æ„å›³ã‚’å–å¾—
    node_intent = get_node_intent(node_id)
    primary = node_intent.primary_intent
    secondary = node_intent.secondary_intent
    
    # æ–‡è„ˆãƒ‡ãƒ¼ã‚¿ã§å„ªå…ˆåº¦ã‚’èª¿æ•´
    if context_data.time == "night":
        if primary == "I1":
            primary_score += 30
    
    if context_data.location == "remote":
        if primary == "I3":
            primary_score += 20
    
    # ä¸Šä½2ã¤ã®æ„å›³ã‚’è¿”ã™
    return [primary, secondary]
```

## ãƒ‡ãƒ¼ã‚¿æ›´æ–°ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

1. **æ–°ã—ã„ãƒ†ãƒ¼ãƒã‚’è¿½åŠ ã™ã‚‹å ´åˆ**:
   - `Theme.csv`ã«æ–°ã—ã„ãƒ†ãƒ¼ãƒã‚’è¿½åŠ 
   - æœ€ä½3ã¤ã®ãƒãƒ¼ãƒ‰ï¼ˆç•°å¸¸æ¤œçŸ¥ â†’ åˆ¤å®š â†’ å¯¾å¿œï¼‰ã‚’ä½œæˆ

2. **ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ã‚’æ‹¡å¼µã™ã‚‹å ´åˆ**:
   - `JourneyNode.csv`ã«æ–°ã—ã„ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ 
   - `CheckCondition.csv`ã«åˆ¤å®šæ¡ä»¶ã‚’è¿½åŠ 
   - `Edge.csv`ã§ãƒãƒ¼ãƒ‰é–“ã‚’æ¥ç¶š

3. **ã‚¬ã‚¤ãƒ‰ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¿½åŠ ã™ã‚‹å ´åˆ**:
   - `Guide.csv`ã«æ–°ã—ã„ã‚¬ã‚¤ãƒ‰ã‚’è¿½åŠ 
   - `IntentAction.csv`ã§æ„å›³ã¨ã‚¬ã‚¤ãƒ‰ã‚’ç´ä»˜ã‘

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **RAGæ¤œç´¢ã‚­ãƒ¼ã®è¨­å®š**: `theme_id + node_id + intent_code`ã‚’RAGæ¤œç´¢ã®ã‚­ãƒ¼ã¨ã—ã¦ä½¿ç”¨
2. **UXãƒ­ã‚°ã¨ã®é€£æº**: å„ãƒãƒ¼ãƒ‰ã§ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡Œå‹•ã‚’ãƒ­ã‚°ã¨ã—ã¦è¨˜éŒ²
3. **ç¶™ç¶šçš„æ”¹å–„**: ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã¦ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ã‚’æœ€é©åŒ–

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- `/docs/journey/journey_graph_é‡ç”£ç”¨csvãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ.md`: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®è©³ç´°èª¬æ˜
- `/docs/output/çµ±åˆ_ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶å®šç¾©æ›¸.md`: ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®è¦ä»¶å®šç¾©
</textarea>

  <script>
    function escapeHtml(s) {
      return s
        .replaceAll('&', '&amp;')
        .replaceAll('<', '&lt;')
        .replaceAll('>', '&gt;')
        .replaceAll('"', '&quot;')
        .replaceAll("'", '&#39;');
    }

    // è¶…ç°¡æ˜“ Markdown â†’ HTMLï¼ˆREADMEã‚’çœç•¥ã›ãšã«ã€Œè¡¨ç¤ºã€ã™ã‚‹ãŸã‚ã®æœ€ä½é™ï¼‰
    // - è¦‹å‡ºã—/ç®‡æ¡æ›¸ã/å¤ªå­—/ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰/ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯/åŒºåˆ‡ã‚Šç·š/æ®µè½ ã‚’æ‰±ã†
    function mdToHtml(md) {
      // ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã‚’å…ˆã«é€€é¿
      const codeBlocks = [];
      md = md.replace(/```([\s\S]*?)```/g, (_, body) => {
        const idx = codeBlocks.length;
        codeBlocks.push(body.replace(/^\n+|\n+$/g, ''));
        return `@@CODEBLOCK_${idx}@@`;
      });

      // ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ï¼ˆãƒ—ãƒ¬ãƒ¼ãƒ³éƒ¨åˆ†ï¼‰
      md = escapeHtml(md);

      // ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³è£…é£¾
      md = md.replace(/`([^`]+)`/g, '<code>$1</code>');
      md = md.replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>');

      const lines = md.split('\n');
      let html = '';
      let inUl = false;
      let inOl = false;
      let inP = false;

      function closeLists() {
        if (inUl) { html += '</ul>'; inUl = false; }
        if (inOl) { html += '</ol>'; inOl = false; }
      }
      function closeP() {
        if (inP) { html += '</p>'; inP = false; }
      }

      for (let i = 0; i < lines.length; i++) {
        const line = lines[i];

        // é€€é¿æ¸ˆã¿ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯å¾©å…ƒãƒã‚¤ãƒ³ãƒˆ
        const mCode = line.match(/^@@CODEBLOCK_(\d+)@@$/);
        if (mCode) {
          closeP();
          closeLists();
          const code = codeBlocks[Number(mCode[1])] ?? '';
          html += `<pre><code>${escapeHtml(code)}</code></pre>`;
          continue;
        }

        if (/^---\s*$/.test(line)) {
          closeP(); closeLists();
          html += '<hr />';
          continue;
        }

        const mH1 = line.match(/^#\s+(.+)$/);
        if (mH1) { closeP(); closeLists(); html += `<h1>${mH1[1]}</h1>`; continue; }
        const mH2 = line.match(/^##\s+(.+)$/);
        if (mH2) { closeP(); closeLists(); html += `<h2>${mH2[1]}</h2>`; continue; }
        const mH3 = line.match(/^###\s+(.+)$/);
        if (mH3) { closeP(); closeLists(); html += `<h3>${mH3[1]}</h3>`; continue; }

        const mOl = line.match(/^\s*\d+\.\s+(.+)$/);
        if (mOl) {
          closeP();
          if (inUl) { html += '</ul>'; inUl = false; }
          if (!inOl) { html += '<ol>'; inOl = true; }
          html += `<li>${mOl[1]}</li>`;
          continue;
        }

        const mUl = line.match(/^\s*-\s+(.+)$/);
        if (mUl) {
          closeP();
          if (inOl) { html += '</ol>'; inOl = false; }
          if (!inUl) { html += '<ul>'; inUl = true; }
          html += `<li>${mUl[1]}</li>`;
          continue;
        }

        // ç©ºè¡Œ
        if (line.trim() === '') {
          closeP();
          closeLists();
          continue;
        }

        // æ®µè½
        closeLists();
        if (!inP) { html += '<p>'; inP = true; }
        html += `${line}<br/>`;
      }

      closeP();
      closeLists();
      return html;
    }

    function splitSlides(fullMd) {
      // "## " ã‚’å¢ƒã«ã‚¹ãƒ©ã‚¤ãƒ‰åˆ†å‰²ï¼ˆå…ˆé ­ã® # ã‚‚å«ã‚ã¦1æšç›®ã«ï¼‰
      const lines = fullMd.split(/\r?\n/);
      const chunks = [];
      let buf = [];

      function pushBuf() {
        while (buf.length > 0 && buf[buf.length - 1] === '') buf.pop();
        if (buf.length > 0) chunks.push(buf.join('\n'));
        buf = [];
      }

      for (const line of lines) {
        const isH2 = /^##\s+/.test(line);
        if (isH2 && buf.length > 0) pushBuf();
        buf.push(line);
      }
      pushBuf();
      return chunks;
    }

    const md = document.getElementById('source').value;
    const slides = splitSlides(md);
    let idx = 0;

    const slideEl = document.getElementById('slide');
    const counterEl = document.getElementById('counter');
    const hintEl = document.getElementById('hint');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');

    function render() {
      slideEl.innerHTML = mdToHtml(slides[idx]);
      counterEl.textContent = `${idx + 1} / ${slides.length}`;
      hintEl.textContent = 'å°åˆ·: ãƒ–ãƒ©ã‚¦ã‚¶ã®å°åˆ· â†’ PDF';
      prevBtn.disabled = idx === 0;
      nextBtn.disabled = idx === slides.length - 1;
      history.replaceState(null, '', `#${idx + 1}`);
    }

    function go(n) {
      idx = Math.max(0, Math.min(slides.length - 1, n));
      render();
    }

    prevBtn.addEventListener('click', () => go(idx - 1));
    nextBtn.addEventListener('click', () => go(idx + 1));

    window.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') go(idx - 1);
      if (e.key === 'ArrowRight') go(idx + 1);
    });

    // hashã‹ã‚‰åˆæœŸã‚¹ãƒ©ã‚¤ãƒ‰
    const m = location.hash.match(/^#(\d+)$/);
    if (m) {
      const n = Number(m[1]);
      if (Number.isFinite(n) && n >= 1) idx = Math.min(slides.length - 1, n - 1);
    }

    render();
  </script>
</body>
</html>

