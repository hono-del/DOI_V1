<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ¦ç•¥çš„ãƒã‚¸ã‚·ãƒ§ãƒ‹ãƒ³ã‚°ãƒãƒƒãƒ— 2.0 - ç©ºç™½åœ°å¸¯å¯è¦–åŒ–ç‰ˆ</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            text-align: center;
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 28px;
        }
        
        .subtitle {
            text-align: center;
            color: #718096;
            margin-bottom: 30px;
            font-size: 16px;
        }
        
        .insight-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
        }
        
        .layout {
            display: flex;
            gap: 30px;
        }
        
        .map-container {
            flex: 1;
        }
        
        .filters {
            width: 280px;
            background: #f7fafc;
            padding: 20px;
            border-radius: 12px;
            height: fit-content;
        }
        
        .filter-group {
            margin-bottom: 25px;
        }
        
        .filter-group h4 {
            margin: 0 0 12px 0;
            color: #2d3748;
            font-size: 14px;
            font-weight: 600;
        }
        
        .checkbox-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .checkbox-item label {
            font-size: 13px;
            color: #4a5568;
            cursor: pointer;
        }
        
        .reset-btn {
            width: 100%;
            padding: 12px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: background 0.3s;
        }
        
        .reset-btn:hover {
            background: #5a67d8;
        }
        
        .stats {
            text-align: center;
            margin-top: 15px;
            padding: 12px;
            background: white;
            border-radius: 8px;
            font-size: 14px;
            color: #4a5568;
        }
        
        svg {
            display: block;
            margin: 0 auto;
        }
        
        .axis-label {
            font-size: 14px;
            font-weight: 600;
            fill: #2d3748;
        }
        
        .grid line {
            stroke: #e2e8f0;
            stroke-width: 1;
        }
        
        .quadrant {
            fill-opacity: 0.05;
            stroke: #cbd5e0;
            stroke-width: 2;
            stroke-dasharray: 5,5;
        }
        
        .quadrant-label {
            font-size: 16px;
            font-weight: bold;
            fill: #4a5568;
            text-anchor: middle;
        }
        
        .company-rect {
            stroke-width: 2.5;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .company-rect:hover {
            stroke-width: 4;
            filter: brightness(1.1);
        }
        
        .company-rect.highlight {
            stroke: #e53e3e;
            stroke-width: 5;
            filter: drop-shadow(0 0 10px rgba(229, 62, 62, 0.5));
        }
        
        .company-label {
            font-size: 10px;
            font-weight: 600;
            fill: white;
            text-anchor: middle;
            pointer-events: none;
            dominant-baseline: central;
        }
        
        .company-label.highlight {
            font-size: 11px;
            font-weight: bold;
        }
        
        .company-label.small-text {
            font-size: 8px;
        }
        
        .axis-explanation {
            font-size: 11px;
            fill: #718096;
            font-style: italic;
        }
        
        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 13px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            max-width: 300px;
            z-index: 1000;
        }
        
        .tooltip h4 {
            margin: 0 0 8px 0;
            font-size: 15px;
            color: #fbbf24;
        }
        
        .tooltip p {
            margin: 4px 0;
            line-height: 1.4;
        }
        
        .legend {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: #4a5568;
        }
        
        .legend-box {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 2px solid #2d3748;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ æˆ¦ç•¥çš„ãƒã‚¸ã‚·ãƒ§ãƒ‹ãƒ³ã‚°ãƒãƒƒãƒ— 2.0</h1>
        <div class="subtitle">ç©ºç™½åœ°å¸¯å¯è¦–åŒ–ç‰ˆ - ãƒ¬ã‚¤ãƒ¤ãƒ¼çµ±åˆåº¦ Ã— ä¾¡å€¤å‰µé€ å¿—å‘</div>
        
        <div class="insight-box">
            ğŸ’¡ è‡ªç¤¾ã¯ã€Œåºƒç¯„ãªçµ±åˆ Ã— ä½“é¨“å‰µé€ ã€ã®ç©ºç™½é ˜åŸŸã‚’ç‹¬å ï¼
        </div>
        
        <div class="layout">
            <div class="map-container">
                <svg id="chart"></svg>
                <div class="legend" id="legend"></div>
            </div>
            
            <div class="filters">
                <div class="filter-group">
                    <h4>ğŸ¨ å¸‚å ´æˆç†Ÿåº¦</h4>
                    <div class="checkbox-container">
                        <div class="checkbox-item">
                            <input type="checkbox" id="mat-legacy" value="ãƒ¬ã‚¬ã‚·ãƒ¼" class="maturity-filter" checked>
                            <label for="mat-legacy">ãƒ¬ã‚¬ã‚·ãƒ¼</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="mat-growth" value="æˆé•·æœŸ" class="maturity-filter" checked>
                            <label for="mat-growth">æˆé•·æœŸ</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="mat-emerging" value="æ–°èˆˆ" class="maturity-filter" checked>
                            <label for="mat-emerging">æ–°èˆˆ</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="mat-next" value="æ¬¡ä¸–ä»£" class="maturity-filter" checked>
                            <label for="mat-next">æ¬¡ä¸–ä»£</label>
                        </div>
                    </div>
                </div>

                <div class="filter-group">
                    <h4>ğŸ¤– AIæ´»ç”¨åº¦</h4>
                    <div class="checkbox-container">
                        <div class="checkbox-item">
                            <input type="checkbox" id="ai-none" value="éAI" class="ai-filter" checked>
                            <label for="ai-none">éAI</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="ai-assist" value="AIè£œåŠ©" class="ai-filter" checked>
                            <label for="ai-assist">AIè£œåŠ©</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="ai-center" value="AIä¸­å¿ƒ" class="ai-filter" checked>
                            <label for="ai-center">AIä¸­å¿ƒ</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="ai-native" value="AI Native" class="ai-filter" checked>
                            <label for="ai-native">AI Native</label>
                        </div>
                    </div>
                </div>

                <div class="filter-group">
                    <h4>ğŸ¢ ä¼æ¥­è¦æ¨¡</h4>
                    <div class="checkbox-container">
                        <div class="checkbox-item">
                            <input type="checkbox" id="size-mid" value="ä¸­" class="size-filter" checked>
                            <label for="size-mid">ä¸­è¦æ¨¡</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="size-large" value="å¤§" class="size-filter" checked>
                            <label for="size-large">å¤§ä¼æ¥­</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="size-global" value="ç‰¹å¤§" class="size-filter" checked>
                            <label for="size-global">ã‚°ãƒ­ãƒ¼ãƒãƒ«</label>
                        </div>
                    </div>
                </div>

                <div class="filter-group">
                    <h4>ğŸ­ æ¥­ç•Œ</h4>
                    <div class="checkbox-container">
                        <div class="checkbox-item">
                            <input type="checkbox" id="ind-auto" value="è‡ªå‹•è»Š" class="industry-filter" checked>
                            <label for="ind-auto">è‡ªå‹•è»Š</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="ind-mfg" value="è£½é€ æ¥­" class="industry-filter" checked>
                            <label for="ind-mfg">è£½é€ æ¥­</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="ind-cs" value="ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒãƒ¼ãƒˆ" class="industry-filter" checked>
                            <label for="ind-cs">ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒãƒ¼ãƒˆ</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="ind-fin" value="é‡‘è" class="industry-filter" checked>
                            <label for="ind-fin">é‡‘è</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="ind-all" value="å…¨æ¥­ç•Œ" class="industry-filter" checked>
                            <label for="ind-all">å…¨æ¥­ç•Œ</label>
                        </div>
                    </div>
                </div>

                <div class="filter-group">
                    <h4>âš™ï¸ æ©Ÿèƒ½ãƒ¬ã‚¤ãƒ¤ãƒ¼</h4>
                    <div class="checkbox-container">
                        <div class="checkbox-item">
                            <input type="checkbox" id="func-create" value="ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ¶ä½œ" class="function-filter" checked>
                            <label for="func-create">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ¶ä½œ</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="func-structure" value="æ§‹é€ åŒ–ç®¡ç†" class="function-filter" checked>
                            <label for="func-structure">æ§‹é€ åŒ–ç®¡ç†</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="func-manual" value="Digital Manual" class="function-filter" checked>
                            <label for="func-manual">Digital Manual</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="func-guide" value="çŠ¶æ³åˆ¥ã‚¬ã‚¤ãƒ‰" class="function-filter" checked>
                            <label for="func-guide">çŠ¶æ³åˆ¥ã‚¬ã‚¤ãƒ‰</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="func-navi" value="è¡Œå‹•ãƒŠãƒ“" class="function-filter" checked>
                            <label for="func-navi">è¡Œå‹•ãƒŠãƒ“</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="func-os" value="ä½“é¨“OS" class="function-filter" checked>
                            <label for="func-os">ä½“é¨“OS</label>
                        </div>
                    </div>
                </div>

                <div class="filter-group">
                    <h4>ğŸ‘¥ å¯¾è±¡ãƒ¬ã‚¤ãƒ¤ãƒ¼</h4>
                    <div class="checkbox-container">
                        <div class="checkbox-item">
                            <input type="checkbox" id="target-user" value="User" class="target-filter" checked>
                            <label for="target-user">Userï¼ˆã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="target-dealer" value="Dealer" class="target-filter" checked>
                            <label for="target-dealer">Dealerï¼ˆã‚µãƒãƒ¼ãƒˆï¼‰</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="target-oem" value="OEM" class="target-filter" checked>
                            <label for="target-oem">OEMï¼ˆãƒ¡ãƒ¼ã‚«ãƒ¼ï¼‰</label>
                        </div>
                    </div>
                </div>

                <button class="reset-btn" onclick="resetFilters()">ã™ã¹ã¦é¸æŠ</button>
                
                <div class="stats">
                    <strong>è¡¨ç¤ºä¸­:</strong> <span id="visibleCount">20</span> / 20 ç¤¾
                </div>
            </div>
        </div>
    </div>

    <div class="tooltip" id="tooltip"></div>

    <script>
        // æ–°ã—ã„è»¸ã§ã®åº§æ¨™è¨ˆç®—
        // Xè»¸: ãƒ¬ã‚¤ãƒ¤ãƒ¼çµ±åˆåº¦ (0-100) = (æ©Ÿèƒ½å¹… + å¯¾è±¡å¹…) ã‚’æ­£è¦åŒ–
        // Yè»¸: ä¾¡å€¤å‰µé€ å¿—å‘ (0-100) = æ¥­å‹™æœ€é©åŒ–(0) ï½ ä½“é¨“å‰µé€ (100)
        
        const data = [
            // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ¶ä½œå±¤ï¼ˆç‹­ã„çµ±åˆã€æ¥­å‹™æœ€é©åŒ–å¯„ã‚Šï¼‰
            {name: "Paligo", integration: 15, value: 20, maturity: "ãƒ¬ã‚¬ã‚·ãƒ¼", ai: "éAI", size: "ä¸­", industry: "è£½é€ æ¥­", category: "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ¶ä½œ", functions: ["ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ¶ä½œ"], targets: ["OEM"]},
            {name: "QPP", integration: 15, value: 20, maturity: "ãƒ¬ã‚¬ã‚·ãƒ¼", ai: "éAI", size: "ä¸­", industry: "è£½é€ æ¥­", category: "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ¶ä½œ", functions: ["ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ¶ä½œ"], targets: ["OEM"]},
            
            // æ§‹é€ åŒ–ç®¡ç†å±¤ï¼ˆä¸­ç¨‹åº¦ã®çµ±åˆã€æ¥­å‹™æœ€é©åŒ–ï¼‰
            {name: "Documoto", integration: 25, value: 30, maturity: "æˆé•·æœŸ", ai: "AIè£œåŠ©", size: "ä¸­", industry: "è£½é€ æ¥­", category: "æ§‹é€ åŒ–ç®¡ç†", functions: ["æ§‹é€ åŒ–ç®¡ç†"], targets: ["Dealer"]},
            
            // Digital Manualå±¤ï¼ˆä¸­ç¨‹åº¦ã®çµ±åˆã€ä½“é¨“å‰µé€ å¯„ã‚Šé–‹å§‹ï¼‰
            {name: "Hansem Global", integration: 30, value: 45, maturity: "ãƒ¬ã‚¬ã‚·ãƒ¼", ai: "éAI", size: "å¤§", industry: "å…¨æ¥­ç•Œ", category: "Digital Manual", functions: ["Digital Manual"], targets: ["User"]},
            {name: "Volvo Digital Owner's Manual", integration: 28, value: 50, maturity: "æˆé•·æœŸ", ai: "AIè£œåŠ©", size: "å¤§", industry: "è‡ªå‹•è»Š", category: "Digital Manual", functions: ["Digital Manual"], targets: ["User"]},
            {name: "BMW Intelligent Owner's Manual", integration: 32, value: 55, maturity: "æˆé•·æœŸ", ai: "AIä¸­å¿ƒ", size: "å¤§", industry: "è‡ªå‹•è»Š", category: "Digital Manual", functions: ["Digital Manual"], targets: ["User"]},
            {name: "Toyota T-Connect Manual", integration: 30, value: 50, maturity: "æˆé•·æœŸ", ai: "AIè£œåŠ©", size: "å¤§", industry: "è‡ªå‹•è»Š", category: "Digital Manual", functions: ["Digital Manual"], targets: ["User"]},
            
            // è¡Œå‹•ãƒŠãƒ“å±¤ï¼ˆçµ±åˆåº¦é«˜ã‚ã€ä½“é¨“å‰µé€ å¯„ã‚Šï¼‰
            {name: "Tesla In-Car Help", integration: 50, value: 65, maturity: "æ–°èˆˆ", ai: "AIä¸­å¿ƒ", size: "å¤§", industry: "è‡ªå‹•è»Š", category: "è¡Œå‹•ãƒŠãƒ“", functions: ["Digital Manual", "çŠ¶æ³åˆ¥ã‚¬ã‚¤ãƒ‰", "è¡Œå‹•ãƒŠãƒ“"], targets: ["User"]},
            {name: "ãƒˆãƒ¨ã‚¿ ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ", integration: 45, value: 70, maturity: "æ–°èˆˆ", ai: "AI Native", size: "å¤§", industry: "è‡ªå‹•è»Š", category: "è¡Œå‹•ãƒŠãƒ“", functions: ["çŠ¶æ³åˆ¥ã‚¬ã‚¤ãƒ‰", "è¡Œå‹•ãƒŠãƒ“"], targets: ["User"]},
            
            // Dealer Experience OSï¼ˆåºƒã„çµ±åˆã€æ¥­å‹™æœ€é©åŒ–ï¼‰
            {name: "MSX pubFoundry", integration: 55, value: 35, maturity: "æˆé•·æœŸ", ai: "AIä¸­å¿ƒ", size: "å¤§", industry: "è‡ªå‹•è»Š", category: "Dealer Experience OS", functions: ["æ§‹é€ åŒ–ç®¡ç†", "Digital Manual", "çŠ¶æ³åˆ¥ã‚¬ã‚¤ãƒ‰", "è¡Œå‹•ãƒŠãƒ“"], targets: ["Dealer", "OEM"], highlight: true},
            {name: "ServiceNow", integration: 70, value: 30, maturity: "ãƒ¬ã‚¬ã‚·ãƒ¼", ai: "AIä¸­å¿ƒ", size: "ç‰¹å¤§", industry: "å…¨æ¥­ç•Œ", category: "Operation OS", functions: ["çŠ¶æ³åˆ¥ã‚¬ã‚¤ãƒ‰", "è¡Œå‹•ãƒŠãƒ“", "ä½“é¨“OS"], targets: ["User", "Dealer", "OEM"], highlight: true},
            {name: "Coveo", integration: 60, value: 40, maturity: "æˆé•·æœŸ", ai: "AIä¸­å¿ƒ", size: "å¤§", industry: "å…¨æ¥­ç•Œ", category: "Experience Platform", functions: ["çŠ¶æ³åˆ¥ã‚¬ã‚¤ãƒ‰", "è¡Œå‹•ãƒŠãƒ“"], targets: ["User", "Dealer"]},
            {name: "Kore.ai", integration: 50, value: 45, maturity: "æˆé•·æœŸ", ai: "AI Native", size: "å¤§", industry: "å…¨æ¥­ç•Œ", category: "Conversational AI", functions: ["çŠ¶æ³åˆ¥ã‚¬ã‚¤ãƒ‰", "è¡Œå‹•ãƒŠãƒ“"], targets: ["User", "Dealer"]},
            
            // OEM/è£½é€ å±¤ï¼ˆåºƒã„çµ±åˆã€æ¥­å‹™æœ€é©åŒ–ï¼‰
            {name: "Siemens Xcelerator", integration: 75, value: 35, maturity: "æˆé•·æœŸ", ai: "AIä¸­å¿ƒ", size: "ç‰¹å¤§", industry: "è£½é€ æ¥­", category: "Design OS", functions: ["æ§‹é€ åŒ–ç®¡ç†", "Digital Manual", "çŠ¶æ³åˆ¥ã‚¬ã‚¤ãƒ‰", "è¡Œå‹•ãƒŠãƒ“", "ä½“é¨“OS"], targets: ["Dealer", "OEM"], highlight: true},
            {name: "PTC Vuforia Expert Capture", integration: 40, value: 40, maturity: "æˆé•·æœŸ", ai: "AIä¸­å¿ƒ", size: "å¤§", industry: "è£½é€ æ¥­", category: "ä½œæ¥­ã‚¬ã‚¤ãƒ‰", functions: ["çŠ¶æ³åˆ¥ã‚¬ã‚¤ãƒ‰", "è¡Œå‹•ãƒŠãƒ“"], targets: ["Dealer"]},
            
            // AIç‰¹åŒ–å±¤ï¼ˆä¸­ç¨‹åº¦ã®çµ±åˆã€æ¥­å‹™æœ€é©åŒ–å¯„ã‚Šï¼‰
            {name: "exaBase ç”ŸæˆAI", integration: 55, value: 50, maturity: "æ–°èˆˆ", ai: "AI Native", size: "å¤§", industry: "å…¨æ¥­ç•Œ", category: "ä¼æ¥­AI", functions: ["çŠ¶æ³åˆ¥ã‚¬ã‚¤ãƒ‰", "è¡Œå‹•ãƒŠãƒ“"], targets: ["User", "Dealer"]},
            {name: "Adora", integration: 50, value: 45, maturity: "æ–°èˆˆ", ai: "AI Native", size: "å¤§", industry: "å…¨æ¥­ç•Œ", category: "ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°AI", functions: ["çŠ¶æ³åˆ¥ã‚¬ã‚¤ãƒ‰", "è¡Œå‹•ãƒŠãƒ“"], targets: ["User", "Dealer"]},
            {name: "Lazarus AI", integration: 65, value: 30, maturity: "æ–°èˆˆ", ai: "AI Native", size: "å¤§", industry: "é‡‘è", category: "æ–‡æ›¸å‡¦ç†AI", functions: ["ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ¶ä½œ", "æ§‹é€ åŒ–ç®¡ç†", "Digital Manual", "çŠ¶æ³åˆ¥ã‚¬ã‚¤ãƒ‰"], targets: ["Dealer", "OEM"]},
            {name: "Helpfeel", integration: 45, value: 55, maturity: "æˆé•·æœŸ", ai: "AIä¸­å¿ƒ", size: "ä¸­", industry: "ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒãƒ¼ãƒˆ", category: "FAQæœ€é©åŒ–", functions: ["Digital Manual", "çŠ¶æ³åˆ¥ã‚¬ã‚¤ãƒ‰"], targets: ["User", "Dealer"]},
            
            // è‡ªç¤¾ï¼ˆæœ€ã‚‚åºƒã„çµ±åˆ Ã— ä½“é¨“å‰µé€ ï¼‰
            {name: "ä½“é¨“OSï¼ˆè‡ªç¤¾ï¼‰", integration: 90, value: 95, maturity: "æ¬¡ä¸–ä»£", ai: "AI Native", size: "ç‰¹å¤§", industry: "å…¨æ¥­ç•Œ", category: "Usage Experience OS", functions: ["ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ¶ä½œ", "æ§‹é€ åŒ–ç®¡ç†", "Digital Manual", "çŠ¶æ³åˆ¥ã‚¬ã‚¤ãƒ‰", "è¡Œå‹•ãƒŠãƒ“", "ä½“é¨“OS"], targets: ["User", "Dealer", "OEM"], highlight: true}
        ];

        // SVGè¨­å®šï¼ˆå·¦ãƒãƒ¼ã‚¸ãƒ³ã‚’æ‹¡å¤§ï¼‰
        const margin = {top: 60, right: 60, bottom: 100, left: 120};
        const width = 1000 - margin.left - margin.right;
        const height = 700 - margin.top - margin.bottom;

        const svg = d3.select("#chart")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom);

        const g = svg.append("g")
            .attr("transform", `translate(${margin.left},${margin.top})`);

        // ã‚¹ã‚±ãƒ¼ãƒ«
        const xScale = d3.scaleLinear()
            .domain([0, 100])
            .range([0, width]);

        const yScale = d3.scaleLinear()
            .domain([0, 100])
            .range([height, 0]);

        // ã‚«ãƒ©ãƒ¼ã‚¹ã‚±ãƒ¼ãƒ«
        const colorScale = d3.scaleOrdinal()
            .domain(["ãƒ¬ã‚¬ã‚·ãƒ¼", "æˆé•·æœŸ", "æ–°èˆˆ", "æ¬¡ä¸–ä»£"])
            .range(["#94a3b8", "#10b981", "#fbbf24", "#ef4444"]);

        // è±¡é™ã®æç”»ï¼ˆä¿®æ­£ç‰ˆï¼šYè»¸ã¯ä¸ŠãŒä½“é¨“å‰µé€ ï¼‰
        const quadrants = [
            {x: 0, y: 0, width: 50, height: 50, label: "é™å®šçš„\næ¥­å‹™æœ€é©åŒ–", color: "#e2e8f0", desc: "å˜ä¸€æ©Ÿèƒ½ãƒ»åŠ¹ç‡åŒ–é‡è¦–"},
            {x: 50, y: 0, width: 50, height: 50, label: "åºƒç¯„ãª\næ¥­å‹™æœ€é©åŒ–", color: "#fef3c7", desc: "å¤šæ©Ÿèƒ½çµ±åˆãƒ»åŠ¹ç‡åŒ–é‡è¦–"},
            {x: 0, y: 50, width: 50, height: 50, label: "é™å®šçš„\nä½“é¨“å‰µé€ ", color: "#dbeafe", desc: "å˜ä¸€æ©Ÿèƒ½ãƒ»ä½“é¨“é‡è¦–"},
            {x: 50, y: 50, width: 50, height: 50, label: "â˜…ç©ºç™½é ˜åŸŸâ˜…\nåºƒç¯„ãªä½“é¨“å‰µé€ ", color: "#dcfce7", desc: "å¤šæ©Ÿèƒ½çµ±åˆãƒ»ä½“é¨“é‡è¦–"}
        ];

        quadrants.forEach(q => {
            g.append("rect")
                .attr("class", "quadrant")
                .attr("x", xScale(q.x))
                .attr("y", yScale(q.y + q.height))
                .attr("width", xScale(q.width) - xScale(0))
                .attr("height", yScale(0) - yScale(q.height))
                .style("fill", q.color);

            const labelGroup = g.append("g");
            
            // è±¡é™ãƒ©ãƒ™ãƒ«
            const labelText = labelGroup.append("text")
                .attr("class", "quadrant-label")
                .attr("x", xScale(q.x + q.width/2))
                .attr("y", yScale(q.y + q.height/2) - 10);
            
            q.label.split("\n").forEach((line, i) => {
                labelText.append("tspan")
                    .attr("x", xScale(q.x + q.width/2))
                    .attr("dy", i === 0 ? 0 : 20)
                    .text(line);
            });
            
            // è±¡é™èª¬æ˜
            labelGroup.append("text")
                .attr("class", "axis-explanation")
                .attr("x", xScale(q.x + q.width/2))
                .attr("y", yScale(q.y + q.height/2) + 25)
                .style("text-anchor", "middle")
                .text(q.desc);
        });

        // ã‚°ãƒªãƒƒãƒ‰
        g.append("g")
            .attr("class", "grid")
            .call(d3.axisLeft(yScale)
                .ticks(10)
                .tickSize(-width)
                .tickFormat(""));

        g.append("g")
            .attr("class", "grid")
            .attr("transform", `translate(0,${height})`)
            .call(d3.axisBottom(xScale)
                .ticks(10)
                .tickSize(-height)
                .tickFormat(""));

        // è»¸
        // Xè»¸
        g.append("g")
            .attr("transform", `translate(0,${height})`)
            .call(d3.axisBottom(xScale).tickValues([0, 25, 50, 75, 100]))
            .append("text")
            .attr("class", "axis-label")
            .attr("x", width / 2)
            .attr("y", 50)
            .style("text-anchor", "middle")
            .text("ãƒ¬ã‚¤ãƒ¤ãƒ¼çµ±åˆåº¦ï¼ˆæ©Ÿèƒ½Ã—å¯¾è±¡ã®ã‚«ãƒãƒ¼ç¯„å›²ï¼‰");
        
        // Xè»¸ã®è£œè¶³èª¬æ˜ï¼ˆ2è¡Œã«åˆ†ã‘ã¦è©³ç´°ã«ï¼‰
        g.append("text")
            .attr("class", "axis-explanation")
            .attr("x", width / 2)
            .attr("y", height + 70)
            .style("text-anchor", "middle")
            .text("æ©Ÿèƒ½: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ¶ä½œâ†’æ§‹é€ åŒ–ç®¡ç†â†’Digital Manualâ†’çŠ¶æ³åˆ¥ã‚¬ã‚¤ãƒ‰â†’è¡Œå‹•ãƒŠãƒ“â†’ä½“é¨“OS");
        
        g.append("text")
            .attr("class", "axis-explanation")
            .attr("x", width / 2)
            .attr("y", height + 85)
            .style("text-anchor", "middle")
            .text("å¯¾è±¡: Userï¼ˆã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰/ Dealerï¼ˆãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ãƒ»ã‚µãƒãƒ¼ãƒˆï¼‰/ OEMï¼ˆãƒ¡ãƒ¼ã‚«ãƒ¼ï¼‰");

        // Yè»¸ï¼ˆã‚«ã‚¹ã‚¿ãƒ ãƒ©ãƒ™ãƒ«ä»˜ã - é–“éš”ã‚’åºƒã’ã‚‹ï¼‰
        const yAxisLabels = [
            {value: 0, label: "æ¥­å‹™æœ€é©åŒ–"},
            {value: 20, label: ""},
            {value: 40, label: "ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰"},
            {value: 60, label: ""},
            {value: 80, label: ""},
            {value: 100, label: "ä½“é¨“å‰µé€ "}
        ];
        
        const yAxis = d3.axisLeft(yScale)
            .tickValues(yAxisLabels.map(d => d.value))
            .tickFormat((d) => {
                const label = yAxisLabels.find(item => item.value === d);
                return label ? label.label : "";
            });
        
        g.append("g")
            .call(yAxis)
            .selectAll("text")
            .style("font-size", "12px")
            .style("font-weight", d => (d === 0 || d === 40 || d === 100) ? "bold" : "normal");
        
        // Yè»¸ãƒ©ãƒ™ãƒ«
        g.append("text")
            .attr("class", "axis-label")
            .attr("transform", "rotate(-90)")
            .attr("x", -height / 2)
            .attr("y", -80)
            .style("text-anchor", "middle")
            .text("ä¾¡å€¤å‰µé€ å¿—å‘");
        
        // Yè»¸ã®è£œè¶³èª¬æ˜
        g.append("text")
            .attr("class", "axis-explanation")
            .attr("transform", "rotate(-90)")
            .attr("x", -height / 2)
            .attr("y", -100)
            .style("text-anchor", "middle")
            .text("ä¸‹: ã‚³ã‚¹ãƒˆå‰Šæ¸›ãƒ»åŠ¹ç‡åŒ– | ä¸Š: é¡§å®¢ä½“é¨“ãƒ»ä¾¡å€¤å‰µé€ ");

        // ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—
        const tooltip = d3.select("#tooltip");
        
        // ãƒ†ã‚­ã‚¹ãƒˆã‚’é©åˆ‡ã«åˆ†å‰²ã™ã‚‹é–¢æ•°
        function splitText(text, maxLength = 15) {
            if (text.length <= maxLength) return [text];
            
            // ã‚¹ãƒšãƒ¼ã‚¹ã¾ãŸã¯è¨˜å·ã§åˆ†å‰²
            const words = text.split(/[\s\-]/);
            const lines = [];
            let currentLine = "";
            
            words.forEach(word => {
                if ((currentLine + " " + word).length <= maxLength) {
                    currentLine = currentLine ? currentLine + " " + word : word;
                } else {
                    if (currentLine) lines.push(currentLine);
                    currentLine = word;
                }
            });
            if (currentLine) lines.push(currentLine);
            
            return lines.length > 0 ? lines : [text];
        }
        
        // å††ã®ã‚µã‚¤ã‚ºã‚’è¨ˆç®—ï¼ˆãƒ†ã‚­ã‚¹ãƒˆã®é•·ã•ã«å¿œã˜ã¦ï¼‰
        function calculateRadius(d) {
            const baseSize = d.size === "ç‰¹å¤§" ? 45 : d.size === "å¤§" ? 35 : 28;
            const nameLength = d.name.length;
            
            // è‡ªç¤¾ã¯ç‰¹åˆ¥ã«å¤§ãã
            if (d.name === "ä½“é¨“OSï¼ˆè‡ªç¤¾ï¼‰") return 55;
            
            // é•·ã„åå‰ã¯å††ã‚’å¤§ãã
            if (nameLength > 25) return baseSize + 5;
            if (nameLength > 20) return baseSize;
            return baseSize - 5;
        }

        // ä¼æ¥­ãƒ—ãƒ­ãƒƒãƒˆï¼ˆå††ã‚’å¤§ããã—ã¦ãƒ†ã‚­ã‚¹ãƒˆã‚’ä¸­ã«å…¥ã‚Œã‚‹ï¼‰
        const rects = g.selectAll(".company-rect")
            .data(data)
            .enter()
            .append("circle")
            .attr("class", d => d.highlight ? "company-rect highlight" : "company-rect")
            .attr("cx", d => xScale(d.integration))
            .attr("cy", d => yScale(d.value))
            .attr("r", d => calculateRadius(d))
            .style("fill", d => colorScale(d.maturity))
            .style("stroke", d => d.highlight ? "#e53e3e" : "#2d3748")
            .style("stroke-width", d => d.highlight ? 3 : 2)
            .style("opacity", d => {
                if (d.ai === "AI Native") return 0.95;
                if (d.ai === "AIä¸­å¿ƒ") return 0.85;
                if (d.ai === "AIè£œåŠ©") return 0.75;
                return 0.65;
            })
            .on("mouseover", function(event, d) {
                d3.select(this)
                    .style("stroke-width", d.highlight ? 5 : 4)
                    .style("opacity", 1);
                    
                tooltip
                    .style("opacity", 1)
                    .html(`
                        <h4>${d.name}</h4>
                        <p><strong>çµ±åˆåº¦:</strong> ${d.integration}</p>
                        <p><strong>ä¾¡å€¤å¿—å‘:</strong> ${d.value}</p>
                        <p><strong>ã‚«ãƒ†ã‚´ãƒª:</strong> ${d.category}</p>
                        <p><strong>æ©Ÿèƒ½:</strong> ${d.functions ? d.functions.join(', ') : 'N/A'}</p>
                        <p><strong>å¯¾è±¡:</strong> ${d.targets ? d.targets.join(', ') : 'N/A'}</p>
                        <p><strong>æ¥­ç•Œ:</strong> ${d.industry}</p>
                        <p><strong>æˆç†Ÿåº¦:</strong> ${d.maturity}</p>
                        <p><strong>AI:</strong> ${d.ai}</p>
                        <p><strong>è¦æ¨¡:</strong> ${d.size}</p>
                    `)
                    .style("left", (event.pageX + 15) + "px")
                    .style("top", (event.pageY - 15) + "px");
            })
            .on("mouseout", function(event, d) {
                d3.select(this)
                    .style("stroke-width", d.highlight ? 3 : 2)
                    .style("opacity", d => {
                        if (d.ai === "AI Native") return 0.95;
                        if (d.ai === "AIä¸­å¿ƒ") return 0.85;
                        if (d.ai === "AIè£œåŠ©") return 0.75;
                        return 0.65;
                    });
                    
                tooltip.style("opacity", 0);
            });

        // ãƒ†ã‚­ã‚¹ãƒˆãƒ©ãƒ™ãƒ«ï¼ˆå††ã®ä¸­ã«é…ç½®ï¼‰
        const labelGroups = g.selectAll(".label-group")
            .data(data)
            .enter()
            .append("g")
            .attr("class", "label-group");

        labelGroups.each(function(d) {
            const group = d3.select(this);
            const lines = splitText(d.name, d.name === "ä½“é¨“OSï¼ˆè‡ªç¤¾ï¼‰" ? 10 : 15);
            const lineHeight = d.name === "ä½“é¨“OSï¼ˆè‡ªç¤¾ï¼‰" ? 13 : 11;
            const startY = yScale(d.value) - ((lines.length - 1) * lineHeight) / 2;
            
            lines.forEach((line, i) => {
                group.append("text")
                    .attr("class", d.highlight ? "company-label highlight" : "company-label")
                    .attr("x", xScale(d.integration))
                    .attr("y", startY + (i * lineHeight))
                    .style("fill", d.highlight ? "white" : "white")
                    .style("font-size", () => {
                        if (d.name === "ä½“é¨“OSï¼ˆè‡ªç¤¾ï¼‰") return "12px";
                        if (d.name.length > 25) return "8px";
                        if (d.name.length > 20) return "9px";
                        return "10px";
                    })
                    .text(line);
            });
        });

        // ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰
        const legendData = [
            {label: "ãƒ¬ã‚¬ã‚·ãƒ¼", color: "#94a3b8"},
            {label: "æˆé•·æœŸ", color: "#10b981"},
            {label: "æ–°èˆˆ", color: "#fbbf24"},
            {label: "æ¬¡ä¸–ä»£", color: "#ef4444"}
        ];

        const legend = d3.select("#legend");
        legendData.forEach(item => {
            const div = legend.append("div").attr("class", "legend-item");
            div.append("div")
                .attr("class", "legend-box")
                .style("background-color", item.color);
            div.append("span").text(item.label);
        });

        // ãƒ•ã‚£ãƒ«ã‚¿æ©Ÿèƒ½
        function updateChart() {
            const maturityFilters = Array.from(document.querySelectorAll('.maturity-filter:checked'))
                .map(cb => cb.value);
            const aiFilters = Array.from(document.querySelectorAll('.ai-filter:checked'))
                .map(cb => cb.value);
            const sizeFilters = Array.from(document.querySelectorAll('.size-filter:checked'))
                .map(cb => cb.value);
            const industryFilters = Array.from(document.querySelectorAll('.industry-filter:checked'))
                .map(cb => cb.value);
            const functionFilters = Array.from(document.querySelectorAll('.function-filter:checked'))
                .map(cb => cb.value);
            const targetFilters = Array.from(document.querySelectorAll('.target-filter:checked'))
                .map(cb => cb.value);

            let visibleCount = 0;

            // å††ã®è¡¨ç¤º/éè¡¨ç¤º
            rects.style("display", function(d) {
                const matchMaturity = maturityFilters.length === 0 || maturityFilters.includes(d.maturity);
                const matchAI = aiFilters.length === 0 || aiFilters.includes(d.ai);
                const matchSize = sizeFilters.length === 0 || sizeFilters.includes(d.size);
                const matchIndustry = industryFilters.length === 0 || industryFilters.includes(d.industry);
                
                // æ©Ÿèƒ½ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼: ã„ãšã‚Œã‹ã®æ©Ÿèƒ½ãŒä¸€è‡´ã™ã‚Œã°OK
                const matchFunction = functionFilters.length === 0 || 
                    (d.functions && d.functions.some(f => functionFilters.includes(f)));
                
                // å¯¾è±¡ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼: ã„ãšã‚Œã‹ã®å¯¾è±¡ãŒä¸€è‡´ã™ã‚Œã°OK
                const matchTarget = targetFilters.length === 0 || 
                    (d.targets && d.targets.some(t => targetFilters.includes(t)));
                
                const visible = matchMaturity && matchAI && matchSize && matchIndustry && matchFunction && matchTarget;
                if (visible) visibleCount++;
                
                return visible ? "block" : "none";
            });

            // ãƒ©ãƒ™ãƒ«ã‚°ãƒ«ãƒ¼ãƒ—ã®è¡¨ç¤º/éè¡¨ç¤º
            g.selectAll(".label-group").style("display", function(d) {
                const matchMaturity = maturityFilters.length === 0 || maturityFilters.includes(d.maturity);
                const matchAI = aiFilters.length === 0 || aiFilters.includes(d.ai);
                const matchSize = sizeFilters.length === 0 || sizeFilters.includes(d.size);
                const matchIndustry = industryFilters.length === 0 || industryFilters.includes(d.industry);
                
                const matchFunction = functionFilters.length === 0 || 
                    (d.functions && d.functions.some(f => functionFilters.includes(f)));
                
                const matchTarget = targetFilters.length === 0 || 
                    (d.targets && d.targets.some(t => targetFilters.includes(t)));
                
                return (matchMaturity && matchAI && matchSize && matchIndustry && matchFunction && matchTarget) ? "block" : "none";
            });

            document.getElementById("visibleCount").textContent = visibleCount;
        }

        function resetFilters() {
            document.querySelectorAll('.maturity-filter, .ai-filter, .size-filter, .industry-filter, .function-filter, .target-filter').forEach(cb => {
                cb.checked = true;
            });
            updateChart();
        }

        document.querySelectorAll('.maturity-filter, .ai-filter, .size-filter, .industry-filter, .function-filter, .target-filter').forEach(checkbox => {
            checkbox.addEventListener('change', updateChart);
        });
    </script>
</body>
</html>