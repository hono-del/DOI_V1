<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç«¶åˆãƒã‚¸ã‚·ãƒ§ãƒ‹ãƒ³ã‚°ãƒãƒƒãƒ—ï¼ˆ5æ¬¡å…ƒå¯¾å¿œï¼‰</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 16px;
            opacity: 0.95;
        }

        .controls {
            padding: 20px 40px;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            align-items: flex-start;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .filter-group h4 {
            font-size: 14px;
            font-weight: 700;
            color: #495057;
            margin: 0;
        }

        .checkbox-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
            background: white;
            padding: 12px;
            border-radius: 8px;
            border: 2px solid #dee2e6;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: background 0.2s;
        }

        .checkbox-item:hover {
            background: #f8f9fa;
        }

        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: #667eea;
        }

        .checkbox-item label {
            font-size: 13px;
            color: #495057;
            cursor: pointer;
            user-select: none;
        }

        .main-content {
            display: flex;
            padding: 40px;
            gap: 40px;
        }

        #chart {
            flex: 1;
            min-width: 0;
        }

        .legend-container {
            width: 280px;
            flex-shrink: 0;
        }

        .legend {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .legend h3 {
            font-size: 16px;
            margin-bottom: 15px;
            color: #212529;
            font-weight: 700;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            font-size: 13px;
            color: #495057;
        }

        .legend-color {
            width: 30px;
            height: 20px;
            border-radius: 4px;
            margin-right: 10px;
            border: 1px solid #dee2e6;
        }

        .legend-shape {
            margin-right: 10px;
        }

        .legend-size {
            display: inline-block;
            margin-right: 10px;
        }

        .tooltip {
            position: absolute;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            max-width: 350px;
            z-index: 1000;
            border: 2px solid #667eea;
        }

        .tooltip h4 {
            margin: 0 0 10px 0;
            font-size: 16px;
            color: #667eea;
            font-weight: 700;
        }

        .tooltip p {
            margin: 5px 0;
            font-size: 13px;
            color: #495057;
            line-height: 1.5;
        }

        .tooltip strong {
            color: #212529;
        }

        svg text {
            user-select: none;
        }

        .axis-label {
            font-size: 14px;
            font-weight: 600;
            fill: #495057;
        }

        .axis line, .axis path {
            stroke: #dee2e6;
            stroke-width: 2;
        }

        .axis text {
            fill: #6c757d;
            font-size: 12px;
        }

        .grid line {
            stroke: #e9ecef;
            stroke-dasharray: 2,2;
        }

        rect.competitor {
            cursor: pointer;
            transition: all 0.3s;
        }

        rect.competitor:hover {
            filter: brightness(1.1);
            stroke-width: 3;
        }

        .company-label {
            font-size: 11px;
            fill: #212529;
            font-weight: 600;
            pointer-events: none;
            text-anchor: middle;
        }

        .reset-btn {
            padding: 12px 24px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            align-self: flex-start;
            margin-top: 28px;
        }

        .reset-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .stats {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            font-size: 13px;
            color: #495057;
        }

        .stats h3 {
            font-size: 16px;
            margin-bottom: 15px;
            color: #212529;
            font-weight: 700;
        }

        .stats p {
            margin: 8px 0;
            line-height: 1.6;
        }

        @media (max-width: 1200px) {
            .main-content {
                flex-direction: column;
            }

            .legend-container {
                width: 100%;
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ ç«¶åˆãƒã‚¸ã‚·ãƒ§ãƒ‹ãƒ³ã‚°ãƒãƒƒãƒ—ï¼ˆ5æ¬¡å…ƒåˆ†æï¼‰</h1>
            <p>æ©Ÿèƒ½ãƒ¬ã‚¤ãƒ¤ãƒ¼ Ã— Lifecycle Ã— å¸‚å ´æˆç†Ÿåº¦ Ã— AIæ´»ç”¨åº¦ Ã— ä¼æ¥­è¦æ¨¡</p>
        </div>

        <div class="controls">
            <div class="filter-group">
                <h4>ğŸ“Š å¸‚å ´æˆç†Ÿåº¦</h4>
                <div class="checkbox-container">
                    <div class="checkbox-item">
                        <input type="checkbox" id="mat-legacy" value="ãƒ¬ã‚¬ã‚·ãƒ¼" class="maturity-filter" checked>
                        <label for="mat-legacy">ãƒ¬ã‚¬ã‚·ãƒ¼ï¼ˆ5å¹´ä»¥ä¸Šï¼‰</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="mat-growth" value="æˆé•·æœŸ" class="maturity-filter" checked>
                        <label for="mat-growth">æˆé•·æœŸï¼ˆ2-5å¹´ï¼‰</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="mat-emerging" value="æ–°èˆˆ" class="maturity-filter" checked>
                        <label for="mat-emerging">æ–°èˆˆï¼ˆ1-2å¹´ï¼‰</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="mat-nextgen" value="æ¬¡ä¸–ä»£" class="maturity-filter" checked>
                        <label for="mat-nextgen">æ¬¡ä¸–ä»£ï¼ˆæœªæ¥å¿—å‘ï¼‰</label>
                    </div>
                </div>
            </div>

            <div class="filter-group">
                <h4>ğŸ¤– AIæ´»ç”¨åº¦</h4>
                <div class="checkbox-container">
                    <div class="checkbox-item">
                        <input type="checkbox" id="ai-none" value="éAI" class="ai-filter" checked>
                        <label for="ai-none">éAIï¼ˆå¾“æ¥å‹ï¼‰</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="ai-assist" value="AIè£œåŠ©" class="ai-filter" checked>
                        <label for="ai-assist">AIè£œåŠ©ï¼ˆä¸€éƒ¨æ­è¼‰ï¼‰</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="ai-center" value="AIä¸­å¿ƒ" class="ai-filter" checked>
                        <label for="ai-center">AIä¸­å¿ƒï¼ˆä¸»è¦æ©Ÿèƒ½ï¼‰</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="ai-native" value="AI Native" class="ai-filter" checked>
                        <label for="ai-native">AI Nativeï¼ˆAIå‰æè¨­è¨ˆï¼‰</label>
                    </div>
                </div>
            </div>

            <div class="filter-group">
                <h4>ğŸ¢ ä¼æ¥­è¦æ¨¡</h4>
                <div class="checkbox-container">
                    <div class="checkbox-item">
                        <input type="checkbox" id="size-mid" value="ä¸­" class="size-filter" checked>
                        <label for="size-mid">ä¸­è¦æ¨¡ï¼ˆä¸­å …ä¼æ¥­ï¼‰</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="size-large" value="å¤§" class="size-filter" checked>
                        <label for="size-large">å¤§ä¼æ¥­ï¼ˆEnterpriseï¼‰</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="size-global" value="ç‰¹å¤§" class="size-filter" checked>
                        <label for="size-global">ã‚°ãƒ­ãƒ¼ãƒãƒ«ï¼ˆGlobalï¼‰</label>
                    </div>
                </div>
            </div>

            <div class="filter-group">
                <h4>ğŸ­ æ¥­ç•Œ</h4>
                <div class="checkbox-container">
                    <div class="checkbox-item">
                        <input type="checkbox" id="ind-auto" value="è‡ªå‹•è»Š" class="industry-filter" checked>
                        <label for="ind-auto">è‡ªå‹•è»Š</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="ind-mfg" value="è£½é€ æ¥­" class="industry-filter" checked>
                        <label for="ind-mfg">è£½é€ æ¥­</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="ind-cs" value="ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒãƒ¼ãƒˆ" class="industry-filter" checked>
                        <label for="ind-cs">ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒãƒ¼ãƒˆ</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="ind-fin" value="é‡‘è" class="industry-filter" checked>
                        <label for="ind-fin">é‡‘è</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="ind-all" value="å…¨æ¥­ç•Œ" class="industry-filter" checked>
                        <label for="ind-all">å…¨æ¥­ç•Œ</label>
                    </div>
                </div>
            </div>

            <button class="reset-btn" onclick="resetFilters()">ã™ã¹ã¦é¸æŠ</button>
        </div>

        <div class="main-content">
            <div id="chart"></div>
            
            <div class="legend-container">
                <div class="legend">
                    <h3>ğŸ“Š å¸‚å ´æˆç†Ÿåº¦ï¼ˆè‰²ï¼‰</h3>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #4a90e2;"></div>
                        <span>ãƒ¬ã‚¬ã‚·ãƒ¼ï¼ˆ5å¹´ä»¥ä¸Šï¼‰</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #7ed321;"></div>
                        <span>æˆé•·æœŸï¼ˆ2-5å¹´ï¼‰</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #f5a623;"></div>
                        <span>æ–°èˆˆï¼ˆ1-2å¹´ï¼‰</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #e74c3c;"></div>
                        <span>æ¬¡ä¸–ä»£ï¼ˆæœªæ¥å¿—å‘ï¼‰</span>
                    </div>
                </div>

                <div class="legend">
                    <h3>ğŸ¤– AIæ´»ç”¨åº¦ï¼ˆãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰</h3>
                    <div class="legend-item">
                        <span class="legend-shape">â– </span>
                        <span>éAIï¼ˆå¾“æ¥å‹ï¼‰</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-shape">â—</span>
                        <span>AIè£œåŠ©ï¼ˆä¸€éƒ¨AIæ­è¼‰ï¼‰</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-shape">â—†</span>
                        <span>AIä¸­å¿ƒï¼ˆä¸»è¦æ©Ÿèƒ½ï¼‰</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-shape">â˜…</span>
                        <span>AI Nativeï¼ˆAIå‰æè¨­è¨ˆï¼‰</span>
                    </div>
                </div>

                <div class="legend">
                    <h3>ğŸ¢ ä¼æ¥­è¦æ¨¡ï¼ˆã‚µã‚¤ã‚ºï¼‰</h3>
                    <div class="legend-item">
                        <span class="legend-size" style="font-size: 11px;">â– </span>
                        <span>ä¸­è¦æ¨¡ï¼ˆä¸­å …ä¼æ¥­å‘ã‘ï¼‰</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-size" style="font-size: 15px;">â– </span>
                        <span>å¤§ä¼æ¥­ï¼ˆEnterpriseï¼‰</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-size" style="font-size: 19px;">â– </span>
                        <span>ã‚°ãƒ­ãƒ¼ãƒãƒ«ï¼ˆGlobalï¼‰</span>
                    </div>
                </div>

                <div class="stats">
                    <h3>ğŸ“ˆ çµ±è¨ˆæƒ…å ±</h3>
                    <p><strong>ç·ç«¶åˆæ•°:</strong> <span id="totalCount">19</span>ç¤¾</p>
                    <p><strong>è¡¨ç¤ºä¸­:</strong> <span id="visibleCount">19</span>ç¤¾</p>
                    <p><strong>è‡ªç¤¾ï¼ˆä½“é¨“OSï¼‰:</strong> å”¯ä¸€ã®æ¬¡ä¸–ä»£ãƒ»å…¨ãƒ¬ã‚¤ãƒ¤ãƒ¼æ¨ªæ–­ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼</p>
                </div>
            </div>
        </div>
    </div>

    <div class="tooltip" id="tooltip"></div>

    <script>
        // ãƒ‡ãƒ¼ã‚¿å®šç¾©
        const data = [
            {name: "Paligo", xStart: 10, xEnd: 25, yStart: 85, yEnd: 95, maturity: "ãƒ¬ã‚¬ã‚·ãƒ¼", ai: "éAI", size: "ä¸­", industry: "è£½é€ æ¥­", reason: "åˆ¶ä½œã€œæ§‹é€ åŒ–ç®¡ç†ã®ã¿"},
            {name: "QPP", xStart: 10, xEnd: 25, yStart: 88, yEnd: 95, maturity: "ãƒ¬ã‚¬ã‚·ãƒ¼", ai: "éAI", size: "ä¸­", industry: "è£½é€ æ¥­", reason: "åˆ¶ä½œé ˜åŸŸ"},
            {name: "MSX pubFoundry", xStart: 25, xEnd: 70, yStart: 55, yEnd: 85, maturity: "æˆé•·æœŸ", ai: "AIä¸­å¿ƒ", size: "å¤§", industry: "è‡ªå‹•è»Š", reason: "Dealer Experience OSï¼ˆæ¥­å‹™æœ€é©åŒ–ï¼‰"},
            {name: "Documoto", xStart: 30, xEnd: 40, yStart: 55, yEnd: 65, maturity: "æˆé•·æœŸ", ai: "AIè£œåŠ©", size: "ä¸­", industry: "è£½é€ æ¥­", reason: "éƒ¨å“æƒ…å ±UX"},
            {name: "Hansem Global", xStart: 35, xEnd: 45, yStart: 15, yEnd: 30, maturity: "ãƒ¬ã‚¬ã‚·ãƒ¼", ai: "éAI", size: "å¤§", industry: "å…¨æ¥­ç•Œ", reason: "Digital Manualä¸­å¿ƒ"},
            {name: "Volvo Digital Owner's Manual", xStart: 35, xEnd: 45, yStart: 15, yEnd: 25, maturity: "æˆé•·æœŸ", ai: "AIè£œåŠ©", size: "å¤§", industry: "è‡ªå‹•è»Š", reason: "é›»å­å–èª¬"},
            {name: "BMW Intelligent Owner's Manual", xStart: 35, xEnd: 50, yStart: 15, yEnd: 25, maturity: "æˆé•·æœŸ", ai: "AIä¸­å¿ƒ", size: "å¤§", industry: "è‡ªå‹•è»Š", reason: "Digital Manualï¼‹éƒ¨åˆ†ã‚¬ã‚¤ãƒ‰"},
            {name: "Toyota T-Connect Manual", xStart: 35, xEnd: 45, yStart: 15, yEnd: 30, maturity: "æˆé•·æœŸ", ai: "AIè£œåŠ©", size: "å¤§", industry: "è‡ªå‹•è»Š", reason: "Digital Manual"},
            {name: "Tesla In-Car Help", xStart: 50, xEnd: 75, yStart: 15, yEnd: 35, maturity: "æ–°èˆˆ", ai: "AIä¸­å¿ƒ", size: "å¤§", industry: "è‡ªå‹•è»Š", reason: "çŠ¶æ³ã‚¬ã‚¤ãƒ‰ï¼‹è¡Œå‹•ãƒŠãƒ“"},
            {name: "ãƒˆãƒ¨ã‚¿ ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ", xStart: 60, xEnd: 75, yStart: 15, yEnd: 35, maturity: "æ–°èˆˆ", ai: "AI Native", size: "å¤§", industry: "è‡ªå‹•è»Š", reason: "AIéŸ³å£°ãƒŠãƒ“"},
            {name: "ServiceNow", xStart: 60, xEnd: 85, yStart: 30, yEnd: 85, maturity: "ãƒ¬ã‚¬ã‚·ãƒ¼", ai: "AIä¸­å¿ƒ", size: "ç‰¹å¤§", industry: "å…¨æ¥­ç•Œ", reason: "AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ»ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ä½“é¨“çµ±åˆ"},
            {name: "Coveo", xStart: 65, xEnd: 80, yStart: 40, yEnd: 80, maturity: "æˆé•·æœŸ", ai: "AIä¸­å¿ƒ", size: "å¤§", industry: "å…¨æ¥­ç•Œ", reason: "Experience Platformã§ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼çµ±åˆ"},
            {name: "Kore.ai", xStart: 65, xEnd: 80, yStart: 55, yEnd: 80, maturity: "æˆé•·æœŸ", ai: "AI Native", size: "å¤§", industry: "å…¨æ¥­ç•Œ", reason: "Conversational AI"},
            {name: "Siemens Xcelerator", xStart: 55, xEnd: 85, yStart: 50, yEnd: 95, maturity: "æˆé•·æœŸ", ai: "AIä¸­å¿ƒ", size: "ç‰¹å¤§", industry: "è£½é€ æ¥­", reason: "ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³çµ±åˆä½“é¨“ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ "},
            {name: "PTC Vuforia Expert Capture", xStart: 50, xEnd: 65, yStart: 55, yEnd: 75, maturity: "æˆé•·æœŸ", ai: "AIä¸­å¿ƒ", size: "å¤§", industry: "è£½é€ æ¥­", reason: "ä½œæ¥­ã‚¬ã‚¤ãƒ‰"},
            {name: "exaBase ç”ŸæˆAI", xStart: 55, xEnd: 75, yStart: 40, yEnd: 80, maturity: "æ–°èˆˆ", ai: "AI Native", size: "å¤§", industry: "å…¨æ¥­ç•Œ", reason: "ä¼æ¥­å‘ã‘ç”ŸæˆAIãƒ»RAGç‰¹åŒ–"},
            {name: "Adora", xStart: 65, xEnd: 85, yStart: 45, yEnd: 75, maturity: "æ–°èˆˆ", ai: "AI Native", size: "å¤§", industry: "å…¨æ¥­ç•Œ", reason: "AIãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°"},
            {name: "Lazarus AI", xStart: 10, xEnd: 70, yStart: 70, yEnd: 95, maturity: "æ–°èˆˆ", ai: "AI Native", size: "å¤§", industry: "é‡‘è", reason: "æ–‡æ›¸å‡¦ç†ç‰¹åŒ–å‹AIãƒ»ã‚»ã‚­ãƒ¥ã‚¢RAG"},
            {name: "Helpfeel", xStart: 40, xEnd: 70, yStart: 20, yEnd: 60, maturity: "æˆé•·æœŸ", ai: "AIä¸­å¿ƒ", size: "ä¸­", industry: "ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒãƒ¼ãƒˆ", reason: "æ„å›³äºˆæ¸¬æ¤œç´¢ãƒ»FAQæœ€é©åŒ–"},
            {name: "ä½“é¨“OSï¼ˆè‡ªç¤¾ï¼‰", xStart: 40, xEnd: 90, yStart: 20, yEnd: 90, maturity: "æ¬¡ä¸–ä»£", ai: "AI Native", size: "ç‰¹å¤§", industry: "å…¨æ¥­ç•Œ", reason: "Digital Manualã€œä½“é¨“OSã‚’æ¨ªæ–­", highlight: true}
        ];

        // è‰²ã®ãƒãƒƒãƒ”ãƒ³ã‚°
        const maturityColors = {
            "ãƒ¬ã‚¬ã‚·ãƒ¼": "#4a90e2",
            "æˆé•·æœŸ": "#7ed321",
            "æ–°èˆˆ": "#f5a623",
            "æ¬¡ä¸–ä»£": "#e74c3c"
        };

        // AIãƒ‘ã‚¿ãƒ¼ãƒ³
        const aiPatterns = {
            "éAI": "none",
            "AIè£œåŠ©": "url(#pattern-ai-assist)",
            "AIä¸­å¿ƒ": "url(#pattern-ai-center)",
            "AI Native": "url(#pattern-ai-native)"
        };

        // ã‚µã‚¤ã‚ºãƒãƒƒãƒ”ãƒ³ã‚°
        const sizeOpacity = {
            "ä¸­": 0.7,
            "å¤§": 0.85,
            "ç‰¹å¤§": 1.0
        };

        // ãƒãƒ£ãƒ¼ãƒˆã®è¨­å®š
        const margin = {top: 60, right: 60, bottom: 80, left: 80};
        const width = 1000 - margin.left - margin.right;
        const height = 700 - margin.top - margin.bottom;

        // ã‚¹ã‚±ãƒ¼ãƒ«
        const xScale = d3.scaleLinear()
            .domain([0, 100])
            .range([0, width]);

        const yScale = d3.scaleLinear()
            .domain([0, 100])
            .range([height, 0]);

        // SVGä½œæˆ
        const svg = d3.select("#chart")
            .append("svg")
            .attr("viewBox", `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`)
            .attr("preserveAspectRatio", "xMidYMid meet")
            .style("max-width", "100%")
            .style("height", "auto");

        const g = svg.append("g")
            .attr("transform", `translate(${margin.left},${margin.top})`);

        // ãƒ‘ã‚¿ãƒ¼ãƒ³å®šç¾©
        const defs = svg.append("defs");

        // AIè£œåŠ©ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆãƒ‰ãƒƒãƒˆï¼‰
        const patternAssist = defs.append("pattern")
            .attr("id", "pattern-ai-assist")
            .attr("patternUnits", "userSpaceOnUse")
            .attr("width", 4)
            .attr("height", 4);
        patternAssist.append("circle")
            .attr("cx", 2)
            .attr("cy", 2)
            .attr("r", 1)
            .attr("fill", "white")
            .attr("opacity", 0.5);

        // AIä¸­å¿ƒãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆã‚¹ãƒˆãƒ©ã‚¤ãƒ—ï¼‰
        const patternCenter = defs.append("pattern")
            .attr("id", "pattern-ai-center")
            .attr("patternUnits", "userSpaceOnUse")
            .attr("width", 4)
            .attr("height", 4)
            .attr("patternTransform", "rotate(45)");
        patternCenter.append("rect")
            .attr("width", 2)
            .attr("height", 4)
            .attr("fill", "white")
            .attr("opacity", 0.3);

        // AI Nativeãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆã‚°ãƒªãƒƒãƒ‰ï¼‰
        const patternNative = defs.append("pattern")
            .attr("id", "pattern-ai-native")
            .attr("patternUnits", "userSpaceOnUse")
            .attr("width", 6)
            .attr("height", 6);
        patternNative.append("path")
            .attr("d", "M 0 0 L 6 6 M 6 0 L 0 6")
            .attr("stroke", "white")
            .attr("stroke-width", 1)
            .attr("opacity", 0.4);

        // ã‚°ãƒªãƒƒãƒ‰ç·š
        const xGrid = g.append("g")
            .attr("class", "grid")
            .selectAll("line")
            .data(d3.range(0, 101, 10))
            .enter()
            .append("line")
            .attr("x1", d => xScale(d))
            .attr("x2", d => xScale(d))
            .attr("y1", 0)
            .attr("y2", height);

        const yGrid = g.append("g")
            .attr("class", "grid")
            .selectAll("line")
            .data(d3.range(0, 101, 10))
            .enter()
            .append("line")
            .attr("x1", 0)
            .attr("x2", width)
            .attr("y1", d => yScale(d))
            .attr("y2", d => yScale(d));

        // Xè»¸
        const xAxis = d3.axisBottom(xScale)
            .tickValues([10, 25, 40, 55, 70, 90])
            .tickFormat(d => {
                const labels = {10: "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„\nåˆ¶ä½œ", 25: "æ§‹é€ åŒ–\nç®¡ç†", 40: "Digital\nManual", 
                              55: "çŠ¶æ³åˆ¥\nã‚¬ã‚¤ãƒ‰", 70: "è¡Œå‹•\nãƒŠãƒ“", 90: "ä½“é¨“OS"};
                return labels[d] || d;
            });

        g.append("g")
            .attr("class", "axis")
            .attr("transform", `translate(0,${height})`)
            .call(xAxis)
            .selectAll("text")
            .style("text-anchor", "middle")
            .attr("dy", "1em");

        // Xè»¸ãƒ©ãƒ™ãƒ«
        g.append("text")
            .attr("class", "axis-label")
            .attr("x", width / 2)
            .attr("y", height + 60)
            .attr("text-anchor", "middle")
            .text("æ©Ÿèƒ½ãƒ¬ã‚¤ãƒ¤ãƒ¼ â†’");

        // Yè»¸
        const yAxis = d3.axisLeft(yScale)
            .tickValues([20, 60, 90])
            .tickFormat(d => {
                const labels = {20: "User", 60: "Dealer", 90: "OEM"};
                return labels[d] || d;
            });

        g.append("g")
            .attr("class", "axis")
            .call(yAxis);

        // Yè»¸ãƒ©ãƒ™ãƒ«
        g.append("text")
            .attr("class", "axis-label")
            .attr("transform", "rotate(-90)")
            .attr("x", -height / 2)
            .attr("y", -60)
            .attr("text-anchor", "middle")
            .text("â† Lifecycle");

        // ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—
        const tooltip = d3.select("#tooltip");

        // çŸ©å½¢æç”»
        const rects = g.selectAll(".competitor")
            .data(data)
            .enter()
            .append("rect")
            .attr("class", "competitor")
            .attr("x", d => xScale(d.xStart))
            .attr("y", d => yScale(d.yEnd))
            .attr("width", d => xScale(d.xEnd) - xScale(d.xStart))
            .attr("height", d => yScale(d.yStart) - yScale(d.yEnd))
            .attr("fill", d => d.highlight ? maturityColors[d.maturity] : maturityColors[d.maturity])
            .style("fill", d => aiPatterns[d.ai] === "none" ? maturityColors[d.maturity] : aiPatterns[d.ai])
            .style("stroke", d => d.highlight ? "#e74c3c" : maturityColors[d.maturity])
            .style("stroke-width", d => d.highlight ? 4 : 2)
            .style("opacity", d => d.highlight ? 1 : sizeOpacity[d.size])
            .on("mouseover", function(event, d) {
                d3.select(this)
                    .style("stroke-width", 4)
                    .style("filter", "brightness(1.2)");

                    tooltip
                    .style("opacity", 1)
                    .html(`
                        <h4>${d.name}</h4>
                        <p><strong>æ©Ÿèƒ½ç¯„å›²:</strong> X: ${d.xStart}-${d.xEnd}</p>
                        <p><strong>å¯¾è±¡å±¤:</strong> Y: ${d.yStart}-${d.yEnd}</p>
                        <p><strong>æ¥­ç•Œ:</strong> ${d.industry}</p>
                        <p><strong>å¸‚å ´æˆç†Ÿåº¦:</strong> ${d.maturity}</p>
                        <p><strong>AIæ´»ç”¨åº¦:</strong> ${d.ai}</p>
                        <p><strong>ä¼æ¥­è¦æ¨¡:</strong> ${d.size}</p>
                        <p><strong>ç‰¹å¾´:</strong> ${d.reason}</p>
                    `)
                    .style("left", (event.pageX + 15) + "px")
                    .style("top", (event.pageY - 15) + "px");
            })
            .on("mouseout", function(event, d) {
                d3.select(this)
                    .style("stroke-width", d.highlight ? 4 : 2)
                    .style("filter", "none");

                tooltip.style("opacity", 0);
            });

        // ãƒ©ãƒ™ãƒ«è¿½åŠ 
        g.selectAll(".company-label")
            .data(data)
            .enter()
            .append("text")
            .attr("class", "company-label")
            .attr("x", d => xScale((d.xStart + d.xEnd) / 2))
            .attr("y", d => yScale((d.yStart + d.yEnd) / 2))
            .attr("dy", "0.35em")
            .text(d => {
                const width = d.xEnd - d.xStart;
                const height = d.yEnd - d.yStart;
                if (width < 15 || height < 15) return "";
                return d.name.length > 15 ? d.name.substring(0, 13) + "..." : d.name;
            })
            .style("font-size", d => {
                const area = (d.xEnd - d.xStart) * (d.yEnd - d.yStart);
                if (area > 800) return "11px";
                if (area > 400) return "9px";
                return "8px";
            })
            .style("fill", d => d.highlight ? "white" : "#212529")
            .style("font-weight", d => d.highlight ? "bold" : "600");

        // ãƒ•ã‚£ãƒ«ã‚¿æ©Ÿèƒ½
        function updateChart() {
            // ãƒã‚§ãƒƒã‚¯ã•ã‚ŒãŸå€¤ã‚’å–å¾—
            const maturityFilters = Array.from(document.querySelectorAll('.maturity-filter:checked'))
                .map(cb => cb.value);
            const aiFilters = Array.from(document.querySelectorAll('.ai-filter:checked'))
                .map(cb => cb.value);
            const sizeFilters = Array.from(document.querySelectorAll('.size-filter:checked'))
                .map(cb => cb.value);
            const industryFilters = Array.from(document.querySelectorAll('.industry-filter:checked'))
                .map(cb => cb.value);

            let visibleCount = 0;

            rects.style("display", function(d) {
                const matchMaturity = maturityFilters.length === 0 || maturityFilters.includes(d.maturity);
                const matchAI = aiFilters.length === 0 || aiFilters.includes(d.ai);
                const matchSize = sizeFilters.length === 0 || sizeFilters.includes(d.size);
                const matchIndustry = industryFilters.length === 0 || industryFilters.includes(d.industry);
                
                const visible = matchMaturity && matchAI && matchSize && matchIndustry;
                if (visible) visibleCount++;
                
                return visible ? "block" : "none";
            });

            g.selectAll(".company-label").style("display", function(d) {
                const matchMaturity = maturityFilters.length === 0 || maturityFilters.includes(d.maturity);
                const matchAI = aiFilters.length === 0 || aiFilters.includes(d.ai);
                const matchSize = sizeFilters.length === 0 || sizeFilters.includes(d.size);
                const matchIndustry = industryFilters.length === 0 || industryFilters.includes(d.industry);
                
                return (matchMaturity && matchAI && matchSize && matchIndustry) ? "block" : "none";
            });

            document.getElementById("visibleCount").textContent = visibleCount;
        }

        function resetFilters() {
            // ã™ã¹ã¦ã®ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’ãƒã‚§ãƒƒã‚¯
            document.querySelectorAll('.maturity-filter, .ai-filter, .size-filter, .industry-filter').forEach(cb => {
                cb.checked = true;
            });
            updateChart();
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        document.querySelectorAll('.maturity-filter, .ai-filter, .size-filter, .industry-filter').forEach(checkbox => {
            checkbox.addEventListener('change', updateChart);
        });

        // åˆæœŸè¡¨ç¤º
        updateChart();
    </script>
</body>
</html>