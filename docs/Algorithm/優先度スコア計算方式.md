# 優先度スコア計算方式

**作成日：** 2026年1月14日  
**バージョン：** 2.1

---

## 🎯 概要

従来の「安全スコア補正値」だけでは、**安全性以外の観点**（快適性、利便性、緊急性など）が評価できなかったため、**複数の優先度軸**を導入し、それらを統合した「総合優先度スコア」で推奨判定を行う方式に変更しました。

---

## 📊 新しい評価軸

### **1. 安全スコア（Safety Score）**

**目的：** 機能を推奨することの**安全性**を評価

**評価内容：**
- 運転状況（道路種別、天気、時間帯、速度）
- ユーザーの習熟度（知識レベル、使用経験）

**スコア範囲：** 0.0 ～ 1.0

**判定基準：**
- 0.85以上：推奨
- 0.60～0.85：条件付き推奨
- 0.60未満：推奨しない

---

### **2. 優先度スコア（Priority Score）**

**目的：** 機能を推奨することの**重要性・緊急性・有用性**を評価

**評価内容：**
- 状況の緊急性（雪の日、買い物時、深夜など）
- 機能の有用性（初回体験の重要性など）
- 快適性・利便性の向上度

**スコア範囲：** 0.0 ～ 1.0

**各軸の優先度スコア：**

| 軸 | スコア名 | 評価内容 |
|----|---------|---------|
| **道路種別** | 優先度スコア | シーンの重要性（買い物、長距離など） |
| **季節** | 優先度スコア | 季節の特性（冬季、夏季など） |
| **天気環境** | 優先度スコア | 気象条件の緊急性（雪、大雨など） |
| **時間帯** | 優先度スコア | 時間帯の特性（深夜、夕方など） |
| **速度交通量** | 優先度スコア | 速度帯の適性（低速ほど推奨しやすい） |
| **知識レベル** | 優先度補正 | 初心者ほど推奨の価値が高い |
| **使用経験** | 優先度スコア | 未使用ほど初回体験の重要性が高い |

---

## 🔢 計算式

### **ステップ1：補正後安全スコアの計算**

```
補正後安全スコア = 基本安全スコア 
                  + 季節の安全スコア補正値
                  + 天気環境の安全スコア補正値
                  + 時間帯の安全スコア補正値
                  + 速度交通量の安全スコア補正値
```

**例：**
```
基本安全スコア：0.90（渋滞追従）
+ 季節：春（0.00）
+ 天気：晴れ（0.00）
+ 時間帯：日中（0.00）
+ 速度：0-20km/h、多い（+0.10）
= 1.00
```

---

### **ステップ2：基本優先度スコアの計算**

```
基本優先度スコア = (道路種別の優先度スコア
                   + 季節の優先度スコア
                   + 天気環境の優先度スコア
                   + 時間帯の優先度スコア
                   + 速度交通量の優先度スコア
                   + 知識レベルの優先度補正
                   + 使用経験の優先度スコア) / 7
```

**例：**
```
道路種別：渋滞（0.15）
+ 季節：春（0.00）
+ 天気：晴れ（0.00）
+ 時間帯：日中（0.00）
+ 速度：0-20km/h、多い（0.15）
+ 知識レベル：初心者（0.10）
+ 使用経験：未使用（0.15）
= 0.55 / 7 = 0.46（平均値）
```

---

### **ステップ3：総合優先度スコアの計算**

```
総合優先度スコア = (補正後安全スコア × 0.6) 
                  + (基本優先度スコア × 0.4)
```

**重み付けの理由：**
- **安全性：60%** - 最も重要な判断基準
- **優先度：40%** - 快適性・利便性・緊急性も考慮

**例：**
```
補正後安全スコア：0.90
基本優先度スコア：0.48
= (0.90 × 0.6) + (0.48 × 0.4)
= 0.54 + 0.19
= 0.73
```

---

### **ステップ4：最終判定と優先度ランク**

#### **最終判定（安全スコアで判定）**

| 補正後安全スコア | 最終判定 |
|---------------|---------|
| 0.85以上 | 推奨 |
| 0.60～0.85 | 条件付き推奨 |
| 0.60未満 | 推奨しない |

#### **優先度ランク（総合優先度スコアで判定）**

| 総合優先度スコア | 優先度ランク |
|---------------|------------|
| 0.85以上 | 最高 |
| 0.70～0.85 | 高 |
| 0.50～0.70 | 中 |
| 0.30～0.50 | 低 |
| 0.30未満 | 最低 |

---

## 📋 具体例

### **例1：渋滞時の初心者に渋滞追従機能を推奨**

#### **入力条件**
- 道路種別：渋滞（ROAD_001）
- 天気：晴れ（WEATHER_001）
- 時間帯：日中（TIME_003）
- 速度：0-20km/h、多い（SPEED_001）
- 知識レベル：初心者（LEVEL_001）
- 使用経験：未使用（EXP_001）
- 機能：ACC（渋滞追従）

#### **計算**

**安全スコア：**
```
基本安全スコア：0.90
+ 季節：春（0.00）
+ 天気：0.00
+ 時間帯：0.00
+ 速度：+0.10
= 1.00
```

**基本優先度スコア：**
```
道路：0.15
+ 季節：0.00
+ 天気：0.00
+ 時間帯：0.00
+ 速度：0.15
+ 知識レベル：0.10
+ 使用経験：0.15
= 0.55 / 7 = 0.46（平均値）
```

**総合優先度スコア：**
```
(1.00 × 0.6) + (0.46 × 0.4) = 0.72
```

#### **結果**
- **補正後安全スコア：1.00** → **最終判定：推奨**
- **総合優先度スコア：0.73** → **優先度ランク：高**

**✅ 安全で、かつ優先度も高い → 積極的に推奨**

---

### **例2：冬の雪の日にシートヒーターを推奨**

#### **入力条件**
- 道路種別：一般道（ROAD_003）
- 季節：冬（SEASON_004）
- 天気：雪（WEATHER_005）
- 時間帯：日中（TIME_003）
- 速度：20-60km/h（SPEED_003）
- 知識レベル：初心者（LEVEL_001）
- 使用経験：未使用（EXP_001）
- 機能：シートヒーター

#### **計算**

**安全スコア：**
```
基本安全スコア：0.85
+ 季節：冬（-0.10）
+ 天気：雪（-0.30）
+ 時間帯：0.00
+ 速度：0.00
= 0.45 → 推奨しない
```

**基本優先度スコア：**
```
道路：0.05
+ 季節：0.20（冬季は暖房機能の優先度が高い）
+ 天気：0.20（雪は運転支援+暖房機能が重要）
+ 時間帯：0.00
+ 速度：0.05
+ 知識レベル：0.10
+ 使用経験：0.15
= 0.75 / 7 = 0.66（平均値）
```

**総合優先度スコア：**
```
(0.45 × 0.6) + (0.66 × 0.4) = 0.27 + 0.26 = 0.53
```

#### **結果**
- **補正後安全スコア：0.45** → **最終判定：推奨しない**（安全スコアが0.60未満）
- **総合優先度スコア：0.53** → **優先度ランク：中**

**⚠️ 雪の日は安全スコアが大幅に低下するため、快適機能の推奨は慎重に**
**💡 改善案：雪の日は「停車中」または「低速（駐車場）」のみ推奨する**

---

### **例3：買い物時にパワーバックドアを推奨**

#### **入力条件**
- 道路種別：買い物（ROAD_009）
- 天気：晴れ（WEATHER_001）
- 時間帯：日中（TIME_003）
- 速度：0-20km/h（SPEED_002）
- 知識レベル：初心者（LEVEL_001）
- 使用経験：未使用（EXP_001）
- 機能：パワーバックドア

#### **計算**

**安全スコア：**
```
基本安全スコア：0.90
+ 天気：0.00
+ 時間帯：0.00
+ 速度：+0.15
= 1.05 → 1.00（上限）
```

**基本優先度スコア：**
```
道路：0.18（買い物シーンは便利機能の優先度が高い）
+ 天気：0.00
+ 時間帯：0.00
+ 速度：0.18（駐車場での低速）
+ 知識レベル：0.10
+ 使用経験：0.15
= 0.61 / 6 = 0.68（平均値）
```

**総合優先度スコア：**
```
(1.00 × 0.6) + (0.68 × 0.4) = 0.60 + 0.27 = 0.90
```

#### **結果**
- **補正後安全スコア：1.00** → **最終判定：推奨**
- **総合優先度スコア：0.90** → **優先度ランク：最高**

**✅ 安全で、かつ便利性の観点から優先度も最高 → 積極的に推奨**

---

### **例4：深夜の高速道路でACCを推奨**

#### **入力条件**
- 道路種別：高速道路（ROAD_002）
- 天気：晴れ（WEATHER_001）
- 時間帯：深夜（TIME_006）
- 速度：80-100km/h（SPEED_005）
- 知識レベル：初心者（LEVEL_001）
- 使用経験：未使用（EXP_001）
- 機能：ACC

#### **計算**

**安全スコア：**
```
基本安全スコア：0.80
+ 天気：0.00
+ 時間帯：-0.20（深夜は疲労リスク）
+ 速度：-0.10（高速）
= 0.50 → 推奨しない
```

**基本優先度スコア：**
```
道路：0.10
+ 天気：0.00
+ 時間帯：0.15（深夜は運転支援が重要）
+ 速度：0.12
+ 知識レベル：0.10
+ 使用経験：0.15
= 0.62 / 6 = 0.47（平均値）
```

**総合優先度スコア：**
```
(0.50 × 0.6) + (0.47 × 0.4) = 0.30 + 0.19 = 0.55
```

#### **結果**
- **補正後安全スコア：0.50** → **最終判定：推奨しない**
- **総合優先度スコア：0.55** → **優先度ランク：中**

**⚠️ 深夜の高速で初めての機能は危険 → 推奨しない**
**💡 改善案：中級者以上、または低速（渋滞）の場合のみ推奨**

---

## 🎯 各軸の優先度スコア設計思想

### **道路種別の優先度スコア**

| 道路種別 | 優先度スコア | 理由 |
|---------|------------|------|
| 買い物 | 0.18 | 便利機能（パワーバックドアなど）の需要が高い |
| 渋滞 | 0.15 | 運転支援機能の学習に最適 |
| 駐車場 | 0.15 | 駐車支援機能の重要性が高い |
| 長距離高速 | 0.12 | 快適機能の重要性が高い |
| 高速道路 | 0.10 | 運転支援機能の効果が高い |
| 山道 | 0.08 | 快適機能がやや重要 |
| 一般道 | 0.05 | 標準的な状況 |
| 市街地 | 0.05 | 標準的な状況 |

---

### **季節の優先度スコア**

| 季節 | 優先度スコア | 安全スコア補正値 | 理由 |
|------|------------|---------------|------|
| 冬 | 0.20 | -0.10 | 暖房機能が最重要、路面凍結リスク |
| 夏 | 0.05 | 0.00 | 冷房機能がやや重要 |
| 春 | 0.00 | 0.00 | 標準的な状況 |
| 秋 | 0.00 | 0.00 | 標準的な状況 |

**設計思想：**
- **冬季の優先度が高い理由：** 暖房機能（シートヒーター、ステアリングヒーターなど）の重要性が最も高い
- **冬季の安全スコア補正値がマイナスの理由：** 路面凍結リスクがあるため、運転全般の安全性が低下

---

### **天気環境の優先度スコア**

| 天気環境 | 優先度スコア | 理由 |
|---------|------------|------|
| 大雪 | 0.25 | 運転支援+暖房機能が最重要 |
| 雪 | 0.20 | 運転支援+暖房機能が重要 |
| 大雨 | 0.15 | 運転支援機能が重要 |
| 霧 | 0.15 | 視認支援機能が重要 |
| 雨 | 0.08 | 運転支援機能がやや重要 |
| 強風 | 0.08 | 車線維持支援が有効 |
| 曇り | 0.02 | やや注意が必要 |
| 晴れ | 0.00 | 標準的な状況 |

**重要な設計思想：**
- **雪・大雪の優先度が高い理由：** 運転支援機能（ACC、LKAなど）と暖房機能（シートヒーター、ステアリングヒーターなど）の両方が重要になるため
- **雨・大雨の優先度：** 主に運転支援機能の重要性が高まる
- **優先度スコアは「機能推奨の重要性」を示す** - 快適性とは別の概念

---

### **時間帯の優先度スコア**

| 時間帯 | 優先度スコア | 理由 |
|-------|------------|------|
| 深夜 | 0.15 | 疲労リスクが高く、運転支援+視認支援が重要 |
| 夜間 | 0.12 | 視認支援機能が重要 |
| 夕方 | 0.08 | 逆光で視認支援機能がやや重要 |
| 早朝 | 0.05 | 視認性がやや低い |
| 朝 | 0.00 | 標準的な状況 |
| 日中 | 0.00 | 標準的な状況 |

---

### **速度交通量の優先度スコア**

| 速度帯 | 優先度スコア | 理由 |
|-------|------------|------|
| 0-20km/h（駐車場） | 0.18 | 駐車支援・便利機能の学習に最適 |
| 0-20km/h（渋滞） | 0.15 | 運転支援機能の学習に最適 |
| 80-100km/h | 0.12 | 高速道路での運転支援・快適機能の効果が高い |
| 60-80km/h | 0.08 | やや高速での機能効果 |
| 20-60km/h | 0.05 | 標準的な状況 |
| 100km/h以上 | -0.10 | 初心者には推奨しない |

---

### **知識レベルの優先度補正**

| 知識レベル | 優先度補正 | 理由 |
|-----------|-----------|------|
| 初心者 | 0.10 | 学習の価値が最も高い |
| 中級 | 0.05 | 復習・定着の価値がある |
| 上級 | 0.00 | 自主的に使える |

---

### **使用経験の優先度スコア**

| 使用経験 | 優先度スコア | 理由 |
|---------|------------|------|
| 未使用 | 0.15 | 初回体験の価値が最も高い |
| 初回体験済み | 0.10 | 定着を促す価値がある |
| 使い慣れている | 0.05 | 習慣化を促す価値がある |
| マスター | 0.00 | 推奨の必要性が低い |

---

## 📊 優先度ランク別の推奨方針

| 優先度ランク | 総合優先度スコア | 推奨方針 | 具体例 |
|------------|---------------|---------|--------|
| **最高** | 0.85以上 | 積極的に推奨、複数チャネルで通知 | 買い物時のパワーバックドア、渋滞時の渋滞追従（日中） |
| **高** | 0.70～0.85 | 推奨、音声+画面で通知 | 夜間のオートハイビーム、冬季のシートヒーター（晴れ） |
| **中** | 0.50～0.70 | 標準推奨、音声または画面で通知 | 長距離でのデジタルインナーミラー、雨天の渋滞追従 |
| **低** | 0.30～0.50 | 控えめに推奨、画面のみで通知 | 上級者へのACC、リアシートリクライニング |
| **最低** | 0.30未満 | 推奨しない | 高速で初めての機能、深夜の高速でACC（初心者） |

---

## 🎯 まとめ

### **新方式の特徴**

✅ **安全性と優先度を分離**
- 安全スコア：機能推奨の安全性を評価
- 優先度スコア：機能推奨の重要性・有用性を評価

✅ **天気と時間帯を分離**
- 天気環境マスタ：気象条件のみ（晴れ、雨、雪、霧など）
- 時間帯マスタ：時間帯のみ（早朝、日中、夕方、夜間、深夜など）

✅ **快適・便利系機能も適切に評価**
- 冬の雪の日：暖房機能の優先度が高い（ただし安全スコアは低い）
- 買い物時：パワーバックドアの優先度が高い
- 長距離：快適機能の優先度が高い
- 深夜：運転支援機能の優先度が高い（疲労リスク対策）

✅ **状況に応じた柔軟な判定**
- 安全性が多少低くても、優先度が高い場合は条件付き推奨
- 逆に、安全性が高くても、優先度が低ければ控えめに推奨

---

**この方式により、運転支援系だけでなく、快適・便利系機能も適切に推奨できるようになりました！**

