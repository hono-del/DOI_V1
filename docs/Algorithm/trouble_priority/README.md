# トラブル対応優先度判定アルゴリズム

**作成日：** 2026年1月14日  
**バージョン：** 1.0

---

## 📂 フォルダ構成

```
trouble_priority/
├── 2-1_トラブル種別マスタ.csv                # トラブルの基本緊急性スコア
├── 2-4_トラブル対応優先度マトリクス_v6.csv   # メイン判定ルール（3ステップ構造：状態理解・判断支援・行動誘導）
├── 2-5_対応チャネルマスタ.csv                # 対応チャネル定義
├── 2-6_テストケース_v2.csv                  # テストケース
├── トラブル対応優先度判定_設計書.md          # 詳細設計ドキュメント
├── マスタファイル参照表.md                   # マスタファイル一覧と参照方法
├── ユーザー情報提供_行動誘導設計.md          # 運転者向け3ステップ情報提供設計
├── コールセンター対応マニュアル.md           # コールセンターオペレーター向けマニュアル
└── README.md                                # このファイル

※ マスタは個別ファイル化され、excel_data/ フォルダと共用・新規作成しています
※ 契約プラン（ベーシック・プレミアム等）は除外されています

【共用マスタ】機能推奨とトラブル対応で共用
  - 1-1_道路種別マスタ.csv
  - 1-2_天気環境マスタ.csv
  - 1-2-2_時間帯マスタ.csv

【トラブル対応専用マスタ - 状況系】
  - 1-13_同乗者マスタ.csv（特記事項含む）
  - 1-14_移動目的マスタ.csv
  - 1-15_移動距離マスタ.csv

【トラブル対応専用マスタ - ユーザー属性系】
  - 1-16_年齢層マスタ.csv
  - 1-17_運転頻度マスタ.csv
  - 1-18_車両タイプマスタ.csv
  - 1-19_トラブル履歴マスタ.csv
```

---

## 🎯 このアルゴリズムの目的

車両トラブル発生時に、以下を自動判定し、運転者とコールセンター双方に最適な情報を提供します：

### **運転者向け（3ステップ構造）**

#### **ステップ1：状態理解**
1. **緊急度表示**（【緊急度：最高/高/中/低】）
2. **トラブル内容**（何が起きているか、付加的状況）
3. **考えられる原因**（部品名・故障箇所の明示）

#### **ステップ2：判断支援**
4. **リスク説明**（継続走行の危険性、影響範囲）
5. **対応内容**（誰が、いつ、何をするか）
6. **安心感の提供**（サポート体制の説明）

#### **ステップ3：行動誘導**
7. **具体的なアクション**（ボタン操作、停車方法等）
8. **注意事項**（やってはいけないこと）
9. **補足ガイド**（追加の安全確保方法）

### **コールセンター向け**
1. **状況サマリー**（トラブル内容、顧客属性、リスク要因）
2. **対応指示**（手配すべきリソース、伝達事項、配慮事項）
3. **推奨対応時間とチャネル**
4. **特別配慮が必要な顧客の識別**

---

## 📊 判定ロジック

### **総合優先度スコアの計算**

```
総合優先度スコア = 基本緊急性スコア × 
                   [状況補正]
                   道路種別補正 × 
                   天気補正 × 
                   時間帯補正 × 
                   同乗者補正 × 
                   移動目的補正 × 
                   移動距離補正 × 
                   [ユーザー属性補正]
                   年齢層補正 × 
                   運転頻度補正 × 
                   車両タイプ補正 × 
                   トラブル履歴補正
```

※ 詳細は `マスタファイル参照表.md` をご覧ください

### **優先度ランクの決定**

| スコア | ランク | 対応時間 |
|--------|--------|---------|
| 1.2以上 | 最高 | 即時～15分 |
| 0.8～1.2未満 | 高 | 20分～60分 |
| 0.5～0.8未満 | 中 | 1～3時間 |
| 0.5未満 | 低 | 当日～翌日 |

---

## 📋 マスタファイル概要

### **2-1_トラブル種別マスタ（30種類）**

| カテゴリ | トラブル例 | 件数 |
|---------|----------|------|
| 走行不能 | エンジン停止、ブレーキ異常、パンク | 5件 |
| 警告灯 | エンジン警告灯、ブレーキ警告灯、ABS警告灯 | 7件 |
| 異音・振動 | エンジン異音、ブレーキ異音、ハンドル振動 | 4件 |
| 電装系 | ライト不良、ワイパー不良、エアコン不調 | 4件 |
| その他 | ドア開閉不良、ADAS不良 | 10件 |

### **状況マスタ（個別ファイル化・機能推奨と共用）**

| マスタファイル | 種類数 | 補正範囲 |
|-------------|-------|---------|
| 1-1_道路種別マスタ | 9種類 | 0.7～1.3 |
| 1-2_天気環境マスタ | 8種類 | 0.9～1.4 |
| 1-2-2_時間帯マスタ | 6種類 | 0.9～1.2 |
| 1-13_同乗者マスタ | 7種類 | 1.0～1.25 |
| 1-14_移動目的マスタ | 8種類 | 0.95～1.3 |
| 1-15_移動距離マスタ | 5種類 | 0.9～1.15 |

### **ユーザー属性マスタ（個別ファイル化）**

| マスタファイル | 種類数 | 補正範囲 |
|-------------|-------|---------|
| 1-16_年齢層マスタ | 5種類 | 0.95～1.2 |
| 1-17_運転頻度マスタ | 5種類 | 0.9～1.15 |
| 1-18_車両タイプマスタ | 5種類 | 0.85～1.25 |
| 1-19_トラブル履歴マスタ | 5種類 | 1.0～1.15 |

---

## 🔍 使用例

### **ケース1：緊急性最高（判定ID: J036）**
- **トラブル：** 高速道路でエンジン停止
- **状況：** 高速道路・雪・深夜・子供同乗・初心者ドライバー
- **判定：** 優先度ランク「最高」（スコア3.85）、即時対応、緊急ロードサービス
- **情報提供：** 【最高警戒】複合リスク最大。即座に110番通報します。
- **行動誘導：** 「最高優先緊急対応」ボタンで自動通報・救護・代替交通手配

### **ケース2：通常対応（判定ID: J008）**
- **トラブル：** 駐車中のエンジン警告灯
- **状況：** 駐車中・日中・買い物
- **判定：** 優先度ランク「中」（スコア0.45）、2時間以内、コールセンター
- **情報提供：** 緊急性は低いですが点検が必要です。2時間以内にご連絡します。
- **行動誘導：** 「症状チェック」実施後、コールセンターから連絡

### **ケース3：低優先（判定ID: J021）**
- **トラブル：** 晴天時のエアコン不調
- **状況：** 一般道・晴れ・日中・買い物
- **判定：** 優先度ランク「低」（スコア0.21）、翌日可、コールセンター
- **情報提供：** 快適性の問題のため、翌日までに点検をおすすめします。
- **行動誘導：** 「ディーラー予約」で点検予約

---

## 📊 データ統計

| 項目 | 件数 |
|------|------|
| トラブル種別 | 30種類 |
| **状況マスタ（計43種類）** | |
| 　- 道路種別 | 9種類 |
| 　- 天気環境 | 8種類 |
| 　- 時間帯 | 6種類 |
| 　- 同乗者状況 | 8種類 |
| 　- 移動目的 | 8種類 |
| 　- 移動距離 | 5種類 |
| **ユーザー属性（計20種類）** | |
| 　- 年齢層 | 5種類 |
| 　- 運転頻度 | 5種類 |
| 　- 車両タイプ | 5種類 |
| 　- トラブル履歴 | 5種類 |
| 判定ルール | 35件 |
| テストケース | 25件 |
| 対応チャネル | 7種類 |

---

## 🎨 情報提供・行動誘導機能

### **運転者向け（優先度別）**
- **最高優先度：** 【最高警戒】表示、即座の危険認識と行動喚起
- **高優先度：** 明確な危険性の説明、対応時間の明示
- **中優先度：** 状況説明と当日中の対応推奨
- **低優先度：** 緊急性は低いが対応必要性を説明

### **運転者向け（チャネル別）**
- **緊急ロードサービス：** 「緊急対応」ボタン（赤色）- ワンタップで即座に手配
- **ロードサービス：** 「ロードサービス手配」ボタン（オレンジ色）- 現在地自動送信
- **コールセンター：** 「症状チェック」→「コールセンター連絡」ボタン
- **ディーラー予約：** 「ディーラー予約」ボタン（青色）- 最寄りディーラー検索と予約

### **コールセンター向け（優先度別）**
- **最高優先度：** 即座の対応開始、多重リソース動員、継続的電話サポート
- **高優先度：** 迅速な対応開始、ロードサービス手配、定期的フォローアップ
- **中優先度：** 計画的対応開始、症状確認とアドバイス、ディーラー予約サポート
- **低優先度：** 計画的修理案内、ディーラー予約サポート、予防保全アドバイス

### **コールセンター向け（顧客タイプ別配慮）**
- **高齢者：** ゆっくり丁寧に、専門用語を避ける、段階的な指示
- **初心者・ペーパードライバー：** 落ち着いた声かけ、電話サポート継続
- **妊婦：** 体調確認優先、医療サポート準備、代替交通優先手配
- **子供同乗：** 子供の安全最優先、不安軽減アドバイス
- **業務移動：** 会社連絡サポート、代替交通迅速手配

詳細は以下のドキュメントをご覧ください：
- **運転者向け：** `ユーザー情報提供_行動誘導設計.md`
- **コールセンター向け：** `コールセンター対応マニュアル.md`

---

## 🚀 今後の拡張予定

1. **AIによる優先度予測**
   - 過去データから優先度を機械学習で予測

2. **リアルタイムリソース管理**
   - ロードサービス車両の位置情報連携
   - 動的な対応時間調整

3. **ユーザーフィードバック反映**
   - 対応後の満足度調査（5段階評価）
   - 優先度判定の精度向上
   - A/Bテストによる情報提供・行動誘導の最適化

4. **多言語対応**
   - 外国人ユーザー向けの優先度調整
   - 情報提供メッセージの多言語化

---

## 📞 関連システム

### **機能推奨アルゴリズム**
- フォルダ：`docs/Algorithm/excel_data/`
- 目的：車両機能の推奨タイミング判定
- 関連性：トラブル予防のための機能推奨

### **連携イメージ**
```
機能推奨アルゴリズム → 定期的な機能案内でトラブル予防
         ↓
    トラブル発生
         ↓
トラブル対応優先度判定 → 適切な対応チャネルへ誘導
```

---

## ✅ まとめ

このアルゴリズムは：

1. ✅ **安全を最優先**した判定
2. ✅ **柔軟な優先度調整**（11要素の組み合わせ）
3. ✅ **ユーザー特性への配慮**（年齢層、運転頻度、同乗者等）
4. ✅ **リソースの効率的配分**（契約プラン非依存）
5. ✅ **透明性のある判定プロセス**
6. ✅ **明確な情報提供と行動誘導**（ワンタップで次のアクション）

を実現します。

詳細は以下のドキュメントをご覧ください：
- **判定ロジック：** `トラブル対応優先度判定_設計書.md`
- **マスタファイル：** `マスタファイル参照表.md`
- **運転者向けUI/UX：** `ユーザー情報提供_行動誘導設計.md`
- **コールセンター運用：** `コールセンター対応マニュアル.md`
