# アルゴリズム1：機能推奨タイミング判定 - 作成完了サマリー

**作成日時：** 2026年1月13日  
**ステータス：** ✅ 完了

---

## 🎉 完成した成果物

### **1. 設計書**
- **ファイル：** `docs/Algorithm/01_機能推奨タイミング判定_軸別マスタ.md`
- **内容：** Excel作成のための詳細設計書（11シートの構成、列定義、データ内容）

### **2. 方針書**
- **ファイル：** `docs/Algorithm/アルゴリズム設計方針_軸別管理方式.md`
- **内容：** 軸別管理方式の詳細説明、5つのアルゴリズムへの適用方法

### **3. CSVデータ（11ファイル）**
- **フォルダ：** `docs/Algorithm/excel_data/`
- **エンコーディング：** UTF-8 with BOM（Excelで正しく開ける）

#### **Layer 1：軸別マスタ（6ファイル）**
1. ✅ `1-1_道路種別マスタ.csv`（7行）
2. ✅ `1-2_天気環境マスタ.csv`（8行）
3. ✅ `1-3_速度交通量マスタ.csv`（6行）
4. ✅ `1-4_知識レベルマスタ.csv`（3行）
5. ✅ `1-5_使用経験マスタ.csv`（4行）
6. ✅ `1-6_車種機能マスタ.csv`（8行）

#### **Layer 2：掛け合わせルール（1ファイル）**
7. ✅ `1-7_機能推奨ルールマトリクス.csv`（20行）

#### **Layer 3：出力テンプレート（3ファイル）**
8. ✅ `1-8_運転者向けメッセージ.csv`（15行）
9. ✅ `1-9_セールスマン向けメッセージ.csv`（15行）
10. ✅ `1-10_コールセンター向けメッセージ.csv`（15行）

#### **テスト（1ファイル）**
11. ✅ `1-11_テストケース.csv`（15行）

### **4. README**
- **ファイル：** `docs/Algorithm/excel_data/README.md`
- **内容：** Excelファイル作成方法、条件付き書式、データ検証、数式の設定、使い方

---

## 📊 データの統計

| 種別 | ファイル数 | 総データ行数 | 総列数 |
|------|----------|------------|--------|
| 軸別マスタ | 6 | 36行 | 44列 |
| 掛け合わせルール | 1 | 20行 | 13列 |
| 出力テンプレート | 3 | 45行 | 19列 |
| テスト | 1 | 15行 | 13列 |
| **合計** | **11** | **116行** | **89列** |

---

## 🎯 達成した目標

### **✅ 軸別管理方式の実装**

商談用代替提案アルゴリズムの構造を完全に適用：

```
【従来の方式】
全条件を1つのシートに詰め込む
→ 管理が困難、拡張性が低い

【新しい方式】
軸ごとにマスタを分離 + 掛け合わせルール
→ メンテナンス性が高い、拡張性が高い
```

### **✅ 3ユーザーの「嬉しさ」を実現**

| ユーザー | 嬉しさポイント | 実装内容 |
|---------|--------------|---------|
| **運転者** | 車の機能を最大限活用できる | 15種類のメッセージテンプレート |
| **セールスマン** | 商談時に最適な機能を提案できる | 商談・納車・フォローアップ別メッセージ |
| **コールセンター** | 顧客の状況を即座に把握できる | 問い合わせパターン別メッセージ |

### **✅ 実用的なルールマトリクス**

- **20ルール**を作成（様々な状況をカバー）
- **安全スコア**による自動判定
- **優先度**による推奨の強弱

### **✅ テスト可能な設計**

- **15個のテストケース**を作成
- 入力条件 → 期待される出力の明確化
- PASS/FAILの判定が可能

---

## 📈 具体的な活用例

### **例1：渋滞時の初心者に渋滞追従機能を推奨**

**入力条件：**
- 道路：渋滞（ROAD_001）
- 天気：晴れ（WEATHER_001）
- 速度：0-20km/h、多い（SPEED_001）
- 知識レベル：初心者（LEVEL_001）
- 使用経験：未使用（EXP_001）
- 車種：アクアG（ACC搭載）

**アルゴリズムの判定：**
- 基本安全スコア：0.90
- 補正値：道路(0.00) + 天気(0.00) + 速度(+0.10) = +0.10
- **補正後安全スコア：1.00**
- **最終判定：推奨**
- **優先度：高**

**出力メッセージ：**
「渋滞が始まりました。渋滞追従機能を使うと、ブレーキとアクセルの操作が自動化され、疲労が軽減されます。低速で安全に練習できます。試してみますか？」

**結果：**
✅ 運転者は安全な状況で機能を学習できる  
✅ 機能利用率が向上する  
✅ 運転の疲労が軽減される

---

### **例2：高速道路で初心者にACCを推奨しない**

**入力条件：**
- 道路：高速道路（ROAD_002）
- 天気：晴れ（WEATHER_001）
- 速度：100km/h以上（SPEED_006）
- 知識レベル：初心者（LEVEL_001）
- 使用経験：未使用（EXP_001）
- 車種：アクアG（ACC搭載）

**アルゴリズムの判定：**
- 基本安全スコア：0.80
- 補正値：道路(0.00) + 天気(0.00) + 速度(-0.20) = -0.20
- **補正後安全スコア：0.50**
- **最終判定：推奨しない**

**出力：**
なし（推奨しない）

**結果：**
✅ 危険な状況での機能推奨を回避  
✅ 運転者の安全を最優先  
✅ 事故リスクを低減

---

## 🔄 次のステップ

### **ステップ1：Excelファイルの作成（推奨）**

CSVファイルを1つのExcelファイルにまとめます。

**方法：**
1. Excelを起動し、新しいブックを作成
2. 各CSVファイルを「データ」→「テキストまたはCSVから」でインポート
3. シート名を適切に設定
4. 条件付き書式、データ検証、数式を設定
5. ファイル名：`01_機能推奨タイミング判定_ルールマトリクス.xlsx`

**所要時間：** 30-60分

**参考：** `docs/Algorithm/excel_data/README.md`に詳細な手順を記載

---

### **ステップ2：アルゴリズム2-5の作成**

アルゴリズム1と同じ軸別管理方式で、残り4つのアルゴリズムを作成します。

| アルゴリズム | 軸別マスタ数 | 推定所要時間 |
|------------|------------|------------|
| 2. トラブル対応優先度判定 | 6軸 | 2-3時間 |
| 3. 情報提示レベル調整 | 4軸 | 1-2時間 |
| 4. コミュニケーションチャネル選択 | 5軸 | 1-2時間 |
| 5. 学習コンテンツ推薦 | 6軸 | 2-3時間 |
| **合計** | **21軸** | **6-10時間** |

---

### **ステップ3：顧客C向け提案への組み込み**

作成したアルゴリズムを、顧客C向け提案書に組み込みます。

**提案内容：**
- 5つのアルゴリズムのExcelマトリクスを提供
- 顧客C様のサービス（エネマネ/Experience/WORK/Health/Security）に適用
- 無償提供の特典として活用

---

### **ステップ4：実装・検証**

**実装方法：**
1. **Excel運用：** 現場でExcelを直接使用（手動判定）
2. **システム化：** Excelのロジックをコード化
3. **AI連携：** RAG基盤と連携し、LLMで判定

**検証方法：**
1. テストケース（15件）を実行
2. 実際のユーザーデータで検証
3. フィードバックを基に改善

---

## 💡 この方法の優位性

### **商談用アルゴリズムとの共通性**

| 特徴 | 商談用アルゴリズム | アルゴリズム1 |
|------|----------------|-------------|
| **軸別管理** | 車検管理、ライフステージ、来店管理 | 道路種別、天気、速度、知識レベル |
| **ステータス管理** | 車検30日以内、2台目3年以内 | 初心者、未使用、渋滞 |
| **優先度付与** | 各ステータスに優先度 | 各ルールに優先度 |
| **掛け合わせ** | 複数軸を組み合わせて提案 | 複数軸を組み合わせて推奨 |
| **Excel管理** | 現場で編集可能 | 現場で編集可能 |

### **メリット**

| メリット | 説明 |
|---------|------|
| **メンテナンス性** | 軸ごとに独立しているため、一部の修正が全体に影響しない |
| **拡張性** | 新しい軸やステータスを追加しやすい |
| **理解しやすさ** | 各軸の意味が明確で、非エンジニアでも理解できる |
| **テスト可能** | 軸ごとにテストケースを作成でき、バグを早期発見 |
| **現場改善** | Excelで管理できるため、現場で改善提案できる |
| **AIとの相性** | RAGで各軸の情報を検索し、LLMで判定できる |

---

## 📞 今後のサポート

### **対応可能な作業**

1. ✅ **Excelファイルの作成支援**
   - PowerShellスクリプトの提供
   - 条件付き書式・データ検証の設定

2. ✅ **アルゴリズム2-5の作成**
   - 同じ軸別管理方式で作成
   - CSVファイルとREADMEを提供

3. ✅ **顧客C向け提案への組み込み**
   - プレゼンテーション資料の作成
   - デモシナリオの作成

4. ✅ **実装支援**
   - Pythonスクリプトでの自動判定
   - RAG基盤との連携

---

## 🎊 まとめ

**アルゴリズム1「機能推奨タイミング判定」の軸別マスタシートを完成しました！**

### **成果物：**
- ✅ 設計書（詳細仕様）
- ✅ 方針書（軸別管理方式の説明）
- ✅ CSVデータ（11ファイル、BOM付きUTF-8）
- ✅ README（Excelファイル作成方法）

### **特徴：**
- 🎯 商談用アルゴリズムの構造を完全に適用
- 🎯 3ユーザーの「嬉しさ」を実現
- 🎯 実用的なルールマトリクス（20ルール）
- 🎯 テスト可能な設計（15テストケース）

### **次のアクション：**
1. Excelファイルの作成（30-60分）
2. アルゴリズム2-5の作成（6-10時間）
3. 顧客C向け提案への組み込み

---

**お疲れ様でした！次は何を進めますか？**

1. **Excelファイルの作成を支援する**
2. **アルゴリズム2（トラブル対応優先度判定）の作成を開始する**
3. **顧客C向け提案のプレゼンテーション資料を作成する**
4. **その他**

